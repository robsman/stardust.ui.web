<div class="view-panel" ng-controller="sdGanttChartCtrl as ctrl"
	sg-stretch-to-bottom>
	<!-- ng-show="ctrl.columnData.length > 0" -->
	<div >	
		<div class="iceOutLbl" style="font-size:1.5em"> {{ctrl.process.processName}} (#{{ctrl.process.oid}})</div>
		<div> <span class="iceOutLbl spacing-right">{{i18n('business-control-center-messages.views-customColumn-startDate')}}</span> <span> {{ctrl.process.startTime | date: ctrl.timeFormat}} </span> </div>
		
		</br>
		
		<div> 
			<select ng-model="ctrl.selected.legend" ng-change="ctrl.onLegendChange();" 
					ng-options="opt.id as opt.label for opt in ctrl.legendCategories">
			</select>
		<span ng-repeat=" opt in ctrl.legends" class="gantt-chart-legend-option">
			<span ng-bind="opt.label"> </span>
			<i class="sc sc-square icon-lg gantt-chart-legend-symbol" ng-attr-style="color:{{opt.color}}; background-color :{{opt.color}}"></i>
		</span>
		
		</div>
	
	<br/>
	
<div id="gantt_chart_container">
		
	<table sd-data-table="ctrl.dataTable" sd-data="ctrl.fetchData(params)" sda-ready="ctrl.tableReady" style="width: auto;"
			sda-mode="local" sda-no-pagination="true"
			sda-tree-table>
			<thead >
				<tr>
					<th sda-label="">  
						<div>
							<select ng-model="ctrl.selected.timeFrame" ng-change="ctrl.onTimeFrameChange();" ng-options="opt.id as opt.label for opt in ctrl.timeFrames"> </select> 
						</div>
						<div>	
							<button class="button-link tbl-toolbar-item tbl-tool-link" 
							        title="{{i18n('business-control-center-messages.views-ganttChartView-expandAll')}}" ng-click="ctrl.expandAll();">
							           <i class="sc icon-lg sc-plus"> </i>
							</button>
							<button class="button-link tbl-toolbar-item tbl-tool-link" 
							        title="{{i18n('business-control-center-messages.views-ganttChartView-collapseAll')}}" ng-click="ctrl.collapseAll();">
							           <i class="sc icon-lg sc-minus"> </i>
							 </button>
							<button class="button-link tbl-toolbar-item tbl-tool-link" 
							        title="{{ctrl.getAuxTitle();}}" ng-click="ctrl.toggleAuxillary();">
							        <i class="pi icon-lg pi-eye-open"> </i>
							</button>
						</div>
					</th>
					<th  sda-label=""  >
						<div style="clear:both;"> 
								<span ng-repeat = "major in ctrl.majorTimeFrames" class="majorTimeLine" ng-attr-style="width :{{major.width}}px;" ng-mouseenter="major.toolTip = true;ctrl.mouseEnter($event, 75)" ng-mouseleave="major.toolTip = false" >
										<span ng-if="ctrl.selected.timeFrame == 'days'"> {{major.value |  date:'MMMM yyyy'}} </span>
										<span ng-if="ctrl.selected.timeFrame != 'days'"> {{major.value |  date:'dd MMMM'}} </span>
											<div class="popup-dlg worklist-tooltip" ng-show="major.toolTip" ng-attr-style="color: black;margin-left:{{ctrl.position}}px;" >
									  			<span ng-if="ctrl.selected.timeFrame == 'days'"> {{major.value |  date:'MMMM yyyy'}} </span>
												<span ng-if="ctrl.selected.timeFrame != 'days'"> {{major.value |  date:'dd MMMM'}} </span>
											 </div>
								</span>
								 
						</div>
						<div style="clear:both;" id="minorTimeLine">
								<span ng-repeat = "minor in ctrl.minorTimeFrames" class="minorTimeLine" ng-attr-style="width : {{ctrl.minorTimeFrameWidth}}px;">
											<span ng-if="ctrl.selected.timeFrame == 'days'"> {{minor.value |  date:'dd'}} </span>
											<span ng-if="ctrl.selected.timeFrame == 'hours'"> {{minor.value}}</span>
											<span ng-if="ctrl.selected.timeFrame == 'minutes'"> {{minor.value}}</span>
								</span>
						</div> 
					
					
					 </th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td sda-tree-column >
						<span class="identifierIcon spacing-right"  ng-switch on="rowData.type"> 
							<span ng-switch-default>  <i class="sc sc-cog icon-lg"> </i></span>
							<span ng-switch-when="process"> <i class="sc sc-cogs icon-1-5x "></i></span>
							<span ng-switch-when="Subprocess"><i class="sc sc-cogs icon-1-5x"></i></span>
						</span>
						
						<span ng-bind="rowData.name" class="spacing-right"> </span> 
						<span ng-show="rowData.activatable">
							<button ng-click="ctrl.activate(rowData);" class="button-link tbl-tool-link" title="{{i18n('business-control-center-messages.common-tooltip-activate')}}">
								 <span ><i class="pi pi-activate icon-lg"></i> </span>
							</button>
						</span> 
					</td>
					<td style="padding-left: 0px;"> 
						<span ng-mouseleave="rowData.toolTip = false"> <span
							ng-mouseenter="rowData.toolTip = true;ctrl.mouseEnter($event)"
							class="timeLineCompleted img-rounded"
							ng-attr-style="width :{{ctrl.getChartData(rowData).completed}}px ; margin-left :{{ctrl.getChartData(rowData).delay}}px ; background-color: {{ctrl.getRowColor(rowData)}};color:{{ctrl.getRowColor(rowData)}}">.
						</span> 
						<span ng-if="rowData.type == 'process' && ctrl.getChartData(rowData).inflight > 0"
							class="ganttChart-currentTimeLine"
							ng-attr-style="height:{{ctrl.currentTimeLine.height}}px;">
						</span> 
						<span
							ng-mouseenter="rowData.toolTip = true;ctrl.mouseEnter($event,ctrl.getChartData(rowData).completed)"
							ng-if="ctrl.getChartData(rowData).inflight > 0"
							class="timeLineCompleted timeLineInflight img-rounded"
							ng-attr-style="width :{{ctrl.getChartData(rowData).inflight}}px ; background-color: {{ctrl.getRowColor(rowData)}};color:{{ctrl.getRowColor(rowData)}}">.
						</span>
					</span>
						<div class="popup-dlg worklist-tooltip" ng-show="rowData.toolTip"
							ng-attr-style="margin-left:{{ctrl.getChartData(rowData).delay+ctrl.position}}px;">
							<div ng-ig="rowData.benchmarkCategory" class="ganttChart-popup-legend-category"
								ng-attr-style="background-color: {{ctrl.getRowColor(rowData)}}">
								{{ctrl.getLabel(rowData)}}
							</div>
		
							<div>{{i18n('business-control-center-messages.views-customColumn-startDate')}}
								: {{rowData.startTime | date:ctrl.timeFormat}}</div>
							<div ng-if="!rowData.predictedEndTime">{{i18n('business-control-center-messages.views-customColumn-endDate')}}
								: {{rowData.endTime | date:ctrl.timeFormat}}</div>
							<div ng-if="rowData.predictedEndTime">{{i18n('business-control-center-messages.views-customColumn-endtDate')}}
								: {{rowData.predictedEndTime | date:ctrl.timeFormats}}</div>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
		</div>
	</div>
</div>