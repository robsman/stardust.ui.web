<style>
#ganttChart {
	width: 80%;
	overflow-x: auto;
	margin-left: 20%;
	min-height: 150px;
}

#ganttChart .headcol {
	position: absolute;
	width: 20%;
	left: 0;
}

.gantt-chart-legend-option {
	margin-left: 25px;
}

.gantt-chart-legend-symbol {
	margin-left: 5px;
}

.majorTimeLine {
	background-color: #7081FF;
	text-align: center;
	border-right: 1px solid;
	border-bottom: 2px solid white;
	color: white;
	display: inline-block;
	font-weight: bold
}

.minorTimeLine {
	background-color: #7081FF;
	text-align: center;
	color: white;
	border-right: 1px solid;
	display: inline-block;
}

.timeLineCompleted {
	display: inline-block;
	margin-top: 5px;
	margin-bottom: 5px;
}

.timeLineInflight {
	opacity: 0.4;
	margin-left: -10px;
	padding-right: 10px
}

.ganttChart-currentTimeLine {
	border-left: 1px dotted black;
	position: absolute;
	z-index: 200
}

.ganttChart-popup-legend-category {
	width: 175px;
	color: white;
	font-weight: bold;
	text-align: center;
}
</style>



<div class="view-panel" ng-controller="sdGanttChartCtrl as ctrl"
	sg-stretch-to-bottom>
	
	<div ng-show="ctrl.columnData.length > 0">	
		<div class="iceOutLbl" style="font-size:1.5em"> {{ctrl.process.processName}} (#{{ctrl.process.oid}})</div>
		<div> <span class="iceOutLbl spacing-right">{{i18n('business-control-center-messages.views-customColumn-startDate')}}</span> <span> {{ctrl.process.startTime | date: ctrl.timeFormat}} </span> </div>
		
		</br>
		
		<div> 
			<select ng-model="ctrl.selected.legend" ng-change="ctrl.onLegendChange();" ng-disabled="ctrl.legendCategories.length < 2" 
					ng-options="opt.id as opt.label for opt in ctrl.legendCategories">
			</select>
		<span ng-repeat=" opt in ctrl.legends" class="gantt-chart-legend-option">
			<span ng-bind="opt.label"> </span>
			<i class="sc sc-square icon-lg gantt-chart-legend-symbol" ng-attr-style="color:{{opt.color}}; background-color :{{opt.color}}"></i>
		</span>
		
		</div>
		
			</br>
	
		<div id="ganttChart">
		
			<table class="table-bordered">
				<tr>
					<td class="headcol">
						<div>
							<select ng-model="ctrl.selected.timeFrame" ng-change="ctrl.onTimeFrameChange();" ng-options="opt.id as opt.label for opt in ctrl.timeFrames"> </select> 
						</div>
						<div>	
							<button class="button-link tbl-toolbar-item tbl-tool-link" 
							        title="{{i18n('business-control-center-messages.views-ganttChartView-expandAll')}}" ng-click="ctrl.expandAll();">
							           <i class="sc icon-lg sc-plus"> </i>
							</button>
							<button class="button-link tbl-toolbar-item tbl-tool-link" 
							        title="{{i18n('business-control-center-messages.views-ganttChartView-collapseAll')}}" ng-click="ctrl.collapseAll();">
							           <i class="sc icon-lg sc-minus"> </i>
							 </button>
							<button class="button-link tbl-toolbar-item tbl-tool-link" 
							        title="{{ctrl.getAuxTitle();}}" ng-click="ctrl.toggleAuxillary();">
							        <i class="glyphicon icon-lg glyphicon-eye-open"> </i>
							</button>
						</div>
					</td>
					<td style="white-space:nowrap;">
						<div style="clear:both;"> 
								<span ng-repeat = "major in ctrl.majorTimeFrames" class="majorTimeLine" ng-attr-style="width :{{major.width}}px;" ng-mouseenter="major.toolTip = true;ctrl.mouseEnter($event, 75)" ng-mouseleave="major.toolTip = false" >
										<span ng-if="ctrl.selected.timeFrame == 'days'"> {{major.value |  date:'MMMM yyyy'}} </span>
										<span ng-if="ctrl.selected.timeFrame != 'days'"> {{major.value |  date:'dd MMMM'}} </span>
											<div class="popup-dlg worklist-tooltip" ng-show="major.toolTip" ng-attr-style="color: black;margin-left:{{ctrl.position}}px;" >
									  			<span ng-if="ctrl.selected.timeFrame == 'days'"> {{major.value |  date:'MMMM yyyy'}} </span>
												<span ng-if="ctrl.selected.timeFrame != 'days'"> {{major.value |  date:'dd MMMM'}} </span>
											 </div>
								</span>
								 
						</div>
						<div style="clear:both;" id="minorTimeLine">
								<!-- <span ng-repeat = "minor in ctrl.minorTimeFrames" class="minorTimeLine" ng-attr-style="width : {{ctrl.minorTimeFrameWidth}}px;">
											<span ng-if="ctrl.selected.timeFrame == 'days'"> {{minor.value |  date:'dd'}} </span>
											<span ng-if="ctrl.selected.timeFrame == 'hours'"> {{minor.value}}</span>
											<span ng-if="ctrl.selected.timeFrame == 'minutes'"> {{minor.value}}</span>
								</span> -->
						</div> 
					</td>
				</tr>
				<tr ng-repeat="col in ctrl.columnData | filter:{ auxillary : ctrl.showAuxillary} : ctrl.auxComparator ">
					<td  class="headcol"> 
						<span ng-show="col.type == 'Subprocess' && !col.expanded">
							<button ng-click="ctrl.expandSubProcess(col);" class="button-link tbl-tool-link">
									 <span class="sc icon-lg sc-plus"> </span>
							</button>
						</span> 
						
						<span ng-show="col.type == 'Subprocess' && col.expanded">
							<button ng-click="ctrl.collapseSubprocess(col);" class="button-link tbl-tool-link">
									 <span class="sc icon-lg sc-minus"> </span>
							</button>
						</span> 
						<span class="identifierIcon spacing-right"  ng-switch on="col.type"> 
							<span ng-switch-default>  <i class="sc sc-cog icon-lg"> </i></span>
							<span ng-switch-when="process"> <i class="sc sc-cogs icon-1-5x "></i></span>
							<span ng-switch-when="Subprocess"><i class="sc sc-cogs icon-1-5x"></i></span>
						</span>
						
						
						<span ng-bind="col.name" class="spacing-right"> </span> 
						<span ng-show="col.activatable">
							<button ng-click="ctrl.activate(col);" class="button-link tbl-tool-link ">
								 <span ><i class="fa fa-rocket icon-lg"></i> </span>
							</button>
						</span> 
					
					 </td>
					<td>
						<span  ng-mouseleave="col.toolTip = false" >	
							<span ng-mouseenter="col.toolTip = true;ctrl.mouseEnter($event)" class="timeLineCompleted img-rounded" 
							      ng-attr-style="width :{{col.completed}}px ; margin-left :{{col.delay}}px ; background-color: {{col.color}};color:{{col.color}}">.
							</span> 
							<span ng-if="col.type == 'process' && col.inflight > 0" class="ganttChart-currentTimeLine" ng-attr-style="height:{{ctrl.currentTimeLine.height}}px;"> </span>
							<span ng-mouseenter="col.toolTip = true;ctrl.mouseEnter($event,col.completed)" ng-if="col.inflight > 0" class="timeLineCompleted timeLineInflight img-rounded" 
							      ng-attr-style="width :{{col.inflight}}px ; background-color: {{col.color}};color:{{col.color}}">.
							 </span>
						</span>
						
						<div class="popup-dlg worklist-tooltip"  ng-show="col.toolTip" ng-attr-style="margin-left:{{col.delay+ctrl.position}}px;" >
							<div class="ganttChart-popup-legend-category" ng-attr-style="background-color: {{col.color}}">{{col.status.label}}</div>
							<div>{{i18n('business-control-center-messages.views-customColumn-startDate')}} : 	{{col.startTime |  date:ctrl.timeFormat}} </div>
							<div ng-if="!col.predictedEndTime">{{i18n('business-control-center-messages.views-customColumn-endDate')}} : 	{{col.endTime  |  date:ctrl.timeFormat}}</div>
							<div ng-if="col.predictedEndTime">{{i18n('business-control-center-messages.views-customColumn-endtDate')}} : 	{{col.predictedEndTime  |  date:ctrl.timeFormats}} </div>
						</div>
						
					</td>
					</tr>
			</table>
		</div>
	</div>
	
	

<br>	
	<div>
		<input type="text" ng-model="ctrl.selected.process"/> <button ng-click="ctrl.getProcessInfo()"> Get Process </button>
	</div>
	
	
</div>