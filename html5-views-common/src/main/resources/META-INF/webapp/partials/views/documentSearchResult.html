<div class="doc-srch-wrapper">
    <div class="view-panel-toolbar tbl-title" style="color: #708090;font-size:11px">{{i18n('views-common-messages.views-documentSearchView-documents-title')}}</div>
	<div sda-toolbar>
		<div class="tbl-toolbar-section">
			<button ng-disabled="docSearchViewCtrl.rowSelection == null"
				ng-click="bpmCommon.stopEvent($event); docSearchViewCtrl.openAttachToProcessDialog(docSearchViewCtrl.rowSelection);"
				title="{{i18n('views-common-messages.views-documentSearchView-documentSearchTable-attachToProcess')}}"
				class="button-link tbl-toolbar-item tbl-tool-link">
				<i class="sc sc-fw sc-1x sc-document-attach"></i>
			</button>
		</div>
	</div>
	<table sd-data-table="docSearchViewCtrl.docSrchRsltTable"
		sda-ready="docSearchViewCtrl.showTableData"
		sd-data="docSearchViewCtrl.performSearch(params)" sda-mode="remote"
		sda-selectable="row"
		sda-selection="docSearchViewCtrl.rowSelection"
		sda-column-selector="{{docSearchViewCtrl.columnSelector}}"
		sda-sortable="true"
		sda-sort-by="{name : 'documentName', dir : 'desc'}" sda-exports="true"
		sda-exports-file-name="export-{{docSearchViewCtrl.exportFileName}}">
		<thead
			sda-i18n-scope="views-common-messages.views-documentSearchView-documentSearchTable-column">
			<tr>
				<th sda-name="documentName" sda-sortable="true">
					<div sda-filter-template>
						<div sd-text-search-filter></div>
					</div>
				</th>
				<th sda-name="createDate" sda-sortable="true">
					<div sda-filter-template>
						<div sd-date-filter></div>
					</div>
				</th>
				<th sda-name="modificationDate" sda-sortable="true">
					<div sda-filter-template>
						<div sd-date-filter></div>
					</div>
				</th>
				<th sda-name="fileType" sda-sortable="true">
					<div sda-filter-template>
						<div sd-text-search-filter></div>
					</div>
				</th>
				<th sda-name="documentType" sda-sortable="true">
					<div sda-filter-template>
						<div sd-multi-select-filter
							sda-options="docSearchViewCtrl.documentTypes"></div>
					</div>
				</th>
				<th sda-name="fileSize"></th>
				<th sda-name="metadata"></th>
				<th sda-name="documentPath"></th>
				<th sda-name="repository"></th>
				<th sda-name="documentId" sda-sortable="true">
					<div sda-filter-template>
						<div sd-text-search-filter></div>
					</div>
				</th>
				<th sda-name="author" sda-sortable="true">
					<div sda-filter-template>
						<div sd-text-search-filter></div>
					</div>
				</th>
				<th sda-exportable="false" sda-name="actions" sda-fixed="true"></th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td sda-exporter="rowData.documentName">
					<table>
						<tbody>
							<tr style="vertical-align: top;">
								<td><i
									class="{{docSearchViewCtrl.getGlyphiconClass(rowData.fileType)}}"></i></td>
								<td><a href="#"
									ng-click="bpmCommon.stopEvent($event); docSearchViewCtrl.openDocumentView(rowData.documentId);">
										<div sd-tool-tip
											sda-tool-tip-url="'plugins/html5-views-common/partials/views/documentDetailToolTip.html'"
											sda-title="rowData.documentName"
											sda-tool-tip-class="popup-dlg-bgImg"></div>
								</a></td>
							</tr>
						</tbody>
					</table>
				</td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td sda-exporter="rowData.fileSize | sdFileSizeFilter">{{rowData.fileSize
					| sdFileSizeFilter}}</td>
				<td sda-exporter="docSearchViewCtrl.getMetaData(rowData.metadata)">
				    <table>
						<tr ng-repeat="item in rowData.metadata">
							<td style="white-space: nowrap;">{{item.first}}:</td>
							<td style="white-space: nowrap;">{{item.second}}</td>
						</tr>
					</table>
				</td>
				<td sda-exporter="rowData.documentPath"><table>
						<tbody>
							<tr style="vertical-align: top;">
								<td><i class="glyphicon glyphicon-folder-close"></i></td>
								<td><div ng-bind="rowData.documentPath"></div></td>
							</tr>
						</tbody>
					</table></td>
				<td sda-exporter="rowData.repositoryId"><div
						ng-bind="rowData.repositoryId"></div></td>
				<td></td>
				<td sda-exporter="rowData.author"><a href="#"
					ng-click="docSearchViewCtrl.openUserDetails(rowData.documentOwner)">{{rowData.author}}</a>
				</td>
				<td>
					<div style="text-align: right; white-space: nowrap;">
						<button
							ng-click="bpmCommon.stopEvent($event); docSearchViewCtrl.openProcessDialog(rowData); "
							title="{{i18n('views-common-messages.views-documentSearchView-documentSearchTable-tooltip-process')}}"
							class="button-link tbl-tool-link">
							<i class="glyphicon sc-1x glyphicon-cog"></i>
						</button>
						<button
							ng-click="bpmCommon.stopEvent($event); docSearchViewCtrl.openAttachToProcessDialog(rowData);"
							title="{{i18n('views-common-messages.views-documentSearchView-documentSearchTable-attachToProcess')}}"
							class="button-link tbl-tool-link">
							<i class="sc sc-fw sc-1x sc-document-attach"></i>
						</button>
						<sd-document-download sda-document-id="rowData.documentId"
							sda-document-name="rowData.documentName"></sd-document-download>
						<button
							ng-click="bpmCommon.stopEvent($event);docSearchViewCtrl.setShowDocumentVersions(rowData.documentId,rowData.documentName);"
							title="{{i18n('views-common-messages.views-myDocumentsTreeView-documentTree-versionHistory')}}"
							class="button-link tbl-tool-link">
							<i class="sc sc-fw sc-1x sc-documents"></i>
						</button>
					</div>
				</td>
			</tr>
		</tbody>
	</table>
	<div sd-dialog sda-modal="true"
		sda-show="docSearchViewCtrl.showAttachToProcessDialog"
		sda-type="confirm"
		sda-title="{{i18n('views-common-messages.views-documentSearchView-documentSearchTable-attachToProcess')}}"
		sda-scope="this"
		sda-template="plugins/html5-views-common/partials/views/selectProcessDialog.html"
		sda-on-confirm="docSearchViewCtrl.onConfirmFromAttachToProcess(res)"
		sda-on-close="docSearchViewCtrl.onCloseFromAttachToProcess(res)"
		sda-width="450px">
	</div>	
	<div sd-dialog sda-modal="true"
		sda-show="docSearchViewCtrl.showAttachDocumentResult" sda-type="alert"
		sda-title="{{docSearchViewCtrl.infoData.messageType}}"
		sda-scope="this"
		sda-template="plugins/html5-views-common/partials/views/attachDocumentResult.html"
		sda-cancel-action-label="{{i18n('views-common-messages.common-ok')}}">
	</div>
	<div sd-dialog sda-modal="true"
		sda-show="docSearchViewCtrl.showUserDetails" sda-type="custom"
		sda-title="{{i18n('views-common-messages.views-userDetails-title')}}"
		sda-scope="this"
		sda-template="plugins/html5-views-common/partials/views/userDetails.html"
		sda-width="400px">
    </div>
	<div sd-dialog="docSearchViewCtrl.documentHistory" sda-modal="true"
		sda-show="docSearchViewCtrl.showDocumentVersions" sda-type="custom"
		sda-title="{{i18n('views-common-messages.views-documentView-documentVersion-versionHistory')+ ' ' + docSearchViewCtrl.documentVersions.documentName}}"
		sda-scope="this"
		sda-template="plugins/html5-views-common/partials/views/documentVersion.html"
		sda-on-close="docSearchViewCtrl.onCloseDocumentVersions(res)"
		sda-width="700px">
	</div>
	<div sd-dialog="docSearchViewCtrl.processDialog" sda-modal="true"
		sda-show="docSearchViewCtrl.showProcessDialog" sda-type="custom"
		sda-title="{{i18n('views-common-messages.views-documentSearchView-documentSearchTable-tooltip-process')}}"
		sda-scope="this"
		sda-template="plugins/html5-views-common/partials/views/documentProcessesDialog.html"
		sda-width="300px">
	</div>
</div>