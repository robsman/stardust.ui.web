<f:view xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ice="http://www.icesoft.com/icefaces/component"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:pc="http://www.sungard.de/carnot/web/portal-plugin/portalcommon">

	<c:if test="#{!ippPortalApp.fullScreenModeActivated}">
		<div class="banner">
			<ice:form partialSubmit="false">
				<table cellpadding="0" cellspacing="0" width="100%">
					<tr>
						<td>
							<ice:panelGroup rendered="#{not empty ippPortalUi.commonMenuIframeHandler.commonMenuLinks}">
								<ice:commandLink value="_____________"
									action="#{ippPortalUi.commonMenuIframeHandler.toggleCommonMenuIframePopup}"
									styleClass="commonMenuLnk">
									<pc:automationTag value="auto-FW-CommonMenu" standAlone="false" />
								</ice:commandLink>
								<div id="ippCommonMenuAnchor"></div>
							</ice:panelGroup></td>
						<td width="100%"></td>
						<td style="white-space: nowrap">
							<div class="userConsole">
								<table cellpadding="0" cellspacing="0" width="100%">
									<tr>
										<td width="70%"></td>
										<td style="white-space: nowrap" class="userName">
											<ice:outputText value="#{ippPortalApp.loggedInUser.displayName}">
												<pc:automationTag value="auto-FW-User" standAlone="false" />
											</ice:outputText>
										</td>
										<td style="white-space: nowrap" class="portalAlerts">
											<ui:include src="portalAlerts.xhtml" />
										</td>
										<td style="white-space: nowrap;">
											<pc:automationTag value="auto-FW-Logout" />
									<ice:commandLink value="#{common_msgPropsBean['portalFramework.logout']}"
					               				action="#{ippPortalApp.logout}" styleClass="logout portal-ui-session-control"/>
					               		</td>
					               	</tr>
				               </table>
							</div>
						</td>
					</tr>
				</table>
			</ice:form>
		</div>

		<div class="topMenu">
			<ice:form partialSubmit="false">
				<table cellspacing="0" cellpadding="0" border="0" style="width: 100%;">
					<tr>
						<td class="topMenuTd">
							<ice:panelGroup
								styleClass="topMenuIframeBar">
								<ice:panelGrid columns="2" styleClass="menuItm"
									style="margin-top:-2px;">
									<ice:commandLink
										action="#{ippPortalUi.perspectiveMenuIframeHandler.togglePopup}"
										style="margin-right:3px;">
										<ice:panelGroup style="padding-top: 1px; padding-right: 2px;">
										<ice:graphicImage
											value="/plugins/common/images/icons/trigger-perspective.png" />
										</ice:panelGroup>
									</ice:commandLink>
									<ice:commandLink value="#{ippPortalUi.perspective.label}"
										action="#{ippPortalUi.perspectiveMenuIframeHandler.togglePopup}"
										style="margin-right:3px;">
										<pc:automationTag value="auto-FW-PerspectiveMenu" standAlone="false" />
									</ice:commandLink>
									<div id="ippPerspectiveMenuAnchor"></div>
								</ice:panelGrid>
							</ice:panelGroup>
						</td>

						<td class="topMenuTd">
							<ice:menuBar styleClass="topMenuBar" orientation="horizontal" displayOnClick="true">
								<!-- HELP Menu Item -->
								<c:if test="#{not empty ippPortalApp.helpDocPreference}">
									<pc:automationTag value="auto-FW-HelpMenu" />
									<ice:menuItem value="#{common_msgPropsBean['portalFramework.menu.help']}">
										<ice:menuItem value="#{common_msgPropsBean['portalFramework.menu.help.documentation']}"
											onclick="var helpDocWin = window.open('#{facesContext.externalContext.requestContextPath}#{ippPortalApp.helpDocPreference.include}', 'helpDoc', 'scrollbars=1,status=1,toolbar=1,width=1024,height=768'); helpDocWin.focus(); return false;"/>
									</ice:menuItem>
								</c:if>

								<c:forEach items="#{ippPortalUi.perspective.menuSections}" var="menuSection">
									<ui:include src="portalUserDefinedInclude.xhtml">
										<ui:param name="includeFilePath" value="#{menuSection.include}" />
									</ui:include>
								</c:forEach>
							</ice:menuBar>
						</td>

						<td style="width: 100%" /> <!-- Filler TD -->

						<td class="topMenuTd">
							<ice:menuBar styleClass="topMenuBar">
								<pc:automationTag value="auto-FW-ConfigMenu" />
								<ice:menuItem id="configuration" action="#{ippPortalConfig.openConfiguration}"
									value="#{common_msgPropsBean['portalFramework.menu.configuration']}" />
							</ice:menuBar>
						</td>
					</tr>
				</table>
			</ice:form>
		</div>
	</c:if>

</f:view>