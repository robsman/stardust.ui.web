<f:view xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ice="http://www.icesoft.com/icefaces/component"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">

	<ice:outputDeclaration doctypeRoot="HTML"
		doctypePublic="-//W3C//DTD HTML 4.01 Transitional//EN"
		doctypeSystem="http://www.w3.org/TR/html4/loose.dtd" />

	<html>
	<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>

	<script type="text/javascript"
		src="#{facesContext.externalContext.requestContextPath}/plugins/processportal/IppProcessPortal.js" />

	<ice:outputStyle href="/plugins/common/css/nirvanaRime.css" />
	<ice:outputStyle href="/plugins/common/css/nirvanaRime-override.css" />
	<ice:outputStyle href="/plugins/common/css/nirvanaPortal.css" />
	<ice:outputStyle href="/plugins/common/css/portalComponentStyle.css" />
	<ice:outputStyle href="/plugins/common/css/camino.css" />

	<c:forEach items="#{ippPortalApp.skinFiles}" var="skinFile">
		<ice:outputStyle href="#{skinFile}" />
	</c:forEach>

	<script>
			function windowLoaded()
			{
				var iFrameId = #{ippPortalApp.overflowTabIframePopupId};

				if (iFrameId != '')
				{
					var advanceArgs = #{ippPortalApp.overflowTabIframePopupArgs};
					advanceArgs.width = document.documentElement.scrollWidth + 20;
					advanceArgs.height = document.documentElement.scrollHeight;
	
					parent.ippPortalMain.InfinityBpm.ProcessPortal.resizeAndRepositionContentFrame(iFrameId, advanceArgs);
				}
			}
		</script>
	</head>
	<body style="width: 100%; height: 100%; background-color: #FFFFE1;"
		onLoad="if(windowLoaded){windowLoaded()}">
	<ice:form>
		<ice:panelGroup style="background-color: #FFFFE1;">
			<ice:panelGrid columns="1">
				<c:forEach items="#{ippPortalApp.overflowedViews}" var="views">
					<ice:panelGrid columns="1">
						<ice:commandLink styleClass="action-link"
							style="font-weight: bold;"
							action="#{ippPortalApp.openOverflowView}">
							<f:param name="viewUrl" value="#{views.url}" />
							<ice:panelGrid columns="2">
								<ice:graphicImage value="#{views.icon}" />
								<ice:outputText value="#{views.label}"
									style="white-space: nowrap;" />
							</ice:panelGrid>
						</ice:commandLink>
					</ice:panelGrid>
				</c:forEach>

				<!-- "viewLoop.last" doesn't work, hence "viewLoop.index" is a workaround -->
				<c:forEach items="#{ippPortalApp.displayedViews}" var="view"
					varStatus="viewLoop">
					<ice:panelGrid columns="1">
						<ice:commandLink action="#{ippPortalApp.openOverflowView}"
							styleClass="action-link"
							rendered="#{viewLoop.index lt (ippPortalApp.displayedViewsSize - 1)}">
							<f:param name="viewUrl" value="#{view.url}" />
							<ice:panelGrid columns="2">
								<ice:graphicImage value="#{view.icon}" />
								<ice:outputText value="#{view.label}"
									style="white-space: nowrap;" />
							</ice:panelGrid>
						</ice:commandLink>
					</ice:panelGrid>
				</c:forEach>
			</ice:panelGrid>
		</ice:panelGroup>
	</ice:form>
	</body>
	</html>
</f:view>