<pre class="tbl-error"  ng-if="activityTableCtrl.showError" ng-bind="activityTableCtrl.errorMessage"></pre>
<div class="activity-table-wrapper ng-hide" ng-show="true">
	<div class="worklist-title tbl-title" ng-bind="activityTableCtrl.title"></div>
	<div sda-toolbar>
		<div class="tbl-toolbar-section" ng-if="activityTableCtrl.isToolBarVisible()">
			<button ng-if="activityTableCtrl.isToolBarVisible('complete')" sda-column="TRIVIAL_DATA"  aid="PP-ActivityTable-	CompleteAll" ng-disabled="!activityTableCtrl.containsAllTrivialManualActivities()"  ng-click="activityTableCtrl.$openCompleteDialog()"
					title="{{i18n('processportal.views-worklistPanel-tooltip-completeAll')}}" class="button-link tbl-toolbar-item tbl-tool-link">
			 		  <i class="pi pi-quick-complete pi-lg"></i>
			</button>
			<button ng-if="activityTableCtrl.defaultDelegateEnabled" ng-disabled="activityTableCtrl.dataTable.getSelection() < 1"  aid="PP-ActivityTable-DefaultDelegate"
				    href="#" ng-click="activityTableCtrl.$openDefaultDelegationDialog( activityTableCtrl.dataTable.getSelection() );"
			        title="{{i18n('views-common-messages.common-toolTip-delegateToDefaultPerformer')}}" class="button-link tbl-toolbar-item tbl-tool-link" >
			  		 <i class="pi pi-user pi-lg"></i>
			</button>
			<button ng-if="activityTableCtrl.isToolBarVisible('delegate')" ng-disabled="activityTableCtrl.dataTable.getSelection() < 1" href="#" ng-click="activityTableCtrl.$openDelegateDialog();" aid="PP-ActivityTable-DelegateAll"
			        title="{{i18n('processportal.toolbars-worklistView-tooltip-delegate')}}" class="button-link tbl-toolbar-item tbl-tool-link " >
			  		 <i class="pi pi-badge-portrait pi-fw pi-activity-delegate pi-lg pi-left pi-top">
			         	<i class="pi pi-badge-icon pi-badge-icon-arrow-r"></i>
			         </i>
			</button>
			<button ng-if="activityTableCtrl.isToolBarVisible('abort')"
							ng-disabled="activityTableCtrl.dataTable.getSelection() < 1" aid="PP-ActivityTable-AbortAll" ng-click="activityTableCtrl.$openAbortDialog(activityTableCtrl.dataTable.getSelection())"
			        title="{{i18n('processportal.toolbars-worklistView-tooltip-abort')}}" class="button-link tbl-toolbar-item tbl-tool-link " ng-class="{'tbl-tool-joined-link' : activityTableCtrl.isActivityTableMode()}">
			   <i class="pi pi-abort pi-lg"></i>
			</button>
			<button ng-if="activityTableCtrl.isActivityTableMode();" aid="PP-ActivityTable-AbortPopover" ng-click="activityTableCtrl.openAbortPopover($event,null,141)" ng-disabled="activityTableCtrl.dataTable.getSelection() < 1"
					class="button-link tbl-toolbar-item tbl-tool-link"
					style="position:relative;"
			        title ="{{i18n('views-common-messages.views-abortProcess-menu-tooltip')}}">
				<i class="pi pi-menu-dropdown"></i>
			</button>
			<button ng-disabled="!activityTableCtrl.isPriorityChanged();" aid="PP-ActivityTable-SavePriority" ng-if="activityTableCtrl.priorityEditable" ng-click="activityTableCtrl.savePriorityChanges();"
			      title="{{i18n('views-common-messages.common-tooltip-savePriorityChanges')}}"  class="button-link tbl-toolbar-item tbl-tool-link">
				<i class="pi pi-save pi-lg"></i>
			</button>
		</div>
		<div class="tbl-toolbar-section" ng-if="activityTableCtrl.isToolBarVisible('refresh')">
			<button ng-click="activityTableCtrl.refresh()" aid="PP-ActivityTable-refresh"
					 title="{{i18n('processportal.launchPanels-worklists-button-refresh')}}"
					 class="button-link tbl-toolbar-item tbl-tool-link">
					 <i class="pi pi-refresh pi-lg pi-lg"></i>
			</button>
		</div>
	</div>
	<table sd-data-table="{{activityTableCtrl.tableHandleExpr}}" sd-data="activityTableCtrl.fetchPage(params)" sda-ready="activityTableCtrl.ready"
		sda-page-size="{{activityTableCtrl.sdaPageSize}}" sda-mode="remote"
		sda-selectable="multiple" sda-initial-selection="{{activityTableCtrl.initialSelection}}" sda-selection="{{activityTableCtrl.selectionExpr}}"
		sda-column-selector="{{activityTableCtrl.columnSelector}}" sda-preference-delegate="activityTableCtrl.preferenceDelegate(prefInfo)"
		sda-sortable="true" sda-sort-by="activityTableCtrl.initialSort"
		sda-exports={{activityTableCtrl.isToolBarVisible("export")}} sda-exports-file-name="{{activityTableCtrl.exportFileName}}"  sda-save-state={{activityTableCtrl.isToolBarVisible("saveFilters")}}>
		<thead sda-i18n-scope="processportal.views-worklistPanel-column">
			<tr>
				<th sda-name="activityName" sda-label-key="overview" sda-sortable="true" sda-visible="{{activityTableCtrl.isColumnVisible('activityName')}}">
					<div sda-filter-template>
						<div sd-process-activity-table-filter sda-filter-type='activity' sda-processes="activityTableCtrl.fetchAllProcesses()"></div>
					</div>
				</th>

				<th sda-name="activityOID"  sda-label-key="oid" sda-sortable="true" sda-filterable="true" sda-visible="{{activityTableCtrl.isColumnVisible('activityOID')}}"></th>

				<th sda-name="criticality" sda-sortable="true" sda-visible="{{activityTableCtrl.isColumnVisible('criticality')}}">
					<div sda-filter-template>
						<div sd-criticality-table-filter sda-criticalities="activityTableCtrl.fetchAllAvailableCriticalities()"></div>
					</div>
				</th>

				<th sda-name="priority" sda-sortable="true" sda-visible="{{activityTableCtrl.isColumnVisible('priority')}}">
					<div sda-filter-template>
						<div sd-priority-table-filter></div>
					</div>
				</th>

				<th sda-name="benchmark" sda-sortable="true" sda-visible="{{activityTableCtrl.isColumnVisible('benchmark')}}">
				</th>

				<th sda-name="descriptors" sda-sortable="false"  sda-filterable="false"  sda-visible="{{activityTableCtrl.isColumnVisible('descriptors')}}">
				</th>

				<th sda-name="resubmissionTime"  sda-label-key="resubmissionTime" ng-if="activityTableCtrl.showResubmissionTime()"></th>

				<th sda-name="startTime"  sda-label-key="started" sda-sortable="true" sda-filterable="true" sda-visible="{{activityTableCtrl.isColumnVisible('startTime')}}"></th>

				<th sda-name="lastModified" sda-label-key="lastmodification" sda-sortable="true" sda-filterable="true" sda-visible="{{activityTableCtrl.isColumnVisible('lastModified')}}">
				</th>

				<th sda-name="duration" sda-sortable="false" sda-filterable="false" sda-visible="{{activityTableCtrl.isColumnVisible('duration')}}"></th>

				<th  sda-name="lastPerformer" ng-if ="activityTableCtrl.isWorklistMode();"
					 sda-sortable="false" sda-filterable="false" sda-visible="{{activityTableCtrl.isColumnVisible('lastPerformer')}}">
				</th>

				<th sda-name="processName" sda-label-key="processName"  sda-sortable="false" sda-visible="{{activityTableCtrl.isColumnVisible('processDefinition')}}">
					<div sda-filter-template>
						<div sd-process-activity-table-filter sda-filter-type='process' sda-processes="activityTableCtrl.fetchAllProcesses()"></div>
					</div>
				</th>

				<th sda-name="processOID" ng-if ="activityTableCtrl.isActivityTableMode();" sda-label="{{i18n('views-common-messages.views-userDetails-processTable-column-oid')}}"
				    sda-sortable="true" sda-filterable="true" sda-visible="{{activityTableCtrl.isColumnVisible('processOid')}}">
				</th>

				<th sda-name="status" sda-sortable="false" sda-visible="{{activityTableCtrl.isColumnVisible('status')}}">
					<div sda-filter-template>
						<div sd-multi-select-table-filter sda-options="activityTableCtrl.availableStates"></div>
					</div>
				</th>

				<th sda-name="assignedTo" sda-sortable="false"  sda-filterable="false" sda-visible="{{activityTableCtrl.isColumnVisible('assignedTo')}}">
					<div ng-if="activityTableCtrl.isActivityTableMode();" sda-filter-template>
						<div sd-participant-table-filter></div>
					</div>
				</th>

				<th sda-name="completedBy" ng-if ="activityTableCtrl.isActivityTableMode();" sda-sortable="false"
				    sda-label="{{i18n('views-common-messages.views-activityTable-activityTable-column-completedBy')}}" sda-visible="{{activityTableCtrl.isColumnVisible('completedBy')}}" >
					<div sda-filter-template>
						<div sd-user-table-filter></div>
					</div>
				</th>

				<th sda-name="participantPerformer" ng-if ="activityTableCtrl.isActivityTableMode();"  sda-sortable="false" sda-filterable ="false"
					sda-visible="{{activityTableCtrl.isColumnVisible('participantPerformer')}}" sda-label="{{i18n('views-common-messages.views-activityTable-activityTable-column-participantPerformer')}}">
				</th>

				<th sda-column="DESCRIPTOR_COLUMNS" ng-repeat="descCol in activityTableCtrl.descriptorCols" sda-visible="{{activityTableCtrl.isColumnVisible('descriptorCols')}}"
					sda-name="{{descCol.id}}" sda-label="{{descCol.title}}" sda-sortable="{{descCol.sortable}}" sda-filterable="{{descCol.filterable}}">
					<div sda-filter-template ng-if="descCol.filterable">
						<div ng-if="colData.dataType =='NUMBER'"><div sd-number-table-filter></div></div>
						<div ng-if="colData.dataType =='DATE'"><div sd-date-table-filter></div></div>
						<div ng-if="colData.dataType =='BOOLEAN'"><div sd-boolean-table-filter></div></div>
						<div ng-if="colData.dataType =='STRING'"><div sd-text-search-table-filter></div></div>
					</div>
				</th>

				<th sda-name="rootProcessName"  ng-if ="activityTableCtrl.isWorklistMode();" sda-label="{{i18n('views-common-messages.views-activityTable-column-rootProcess')}}"
				    sda-filterable="true" sda-visible="{{activityTableCtrl.isColumnVisible('rootProcessName')}}">
				    <div sda-filter-template>
						<div sd-process-activity-table-filter sda-filter-type='process' sda-processes="activityTableCtrl.fetchAllProcesses()"></div>
					</div>
				</th>

				<th sda-name="data" sda-column="TRIVIAL_DATA" sda-sortable="false" sda-exportable="false" sda-filterable="false" sda-visible="{{activityTableCtrl.isColumnVisible('data')}}">
				</th>

				<th sda-name="actions" sda-fixed="true" sda-exportable="false" sda-filterable="false">
				</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td sda-exporter="rowData.activity.name" style="white-space: nowrap;">
					<div ng-if="activityTableCtrl.isWorklistMode();">
						<span ng-if="!rowData.isCaseInstance">
							<a ng-if="rowData.activatable || rowData.showResubmitLink" href="#" aid="PP-ActivityTable-activate"
							  ng-click="bpmCommon.stopEvent($event); activityTableCtrl.$activateItem(rowData);"
								title="{{i18n('processportal.views-worklistPanel-tooltip-openActivity')}}" class="button-link tbl-tool-link">
								{{rowData.activity.name}}
							</a>
							 <span ng-if="!rowData.activatable && !rowData.showResubmitLink" ng-bind="rowData.activity.name"> </span>
						 </span>
						 <span ng-if="rowData.isCaseInstance">
							 <a  href="#" aid="PP-ActivityTable-activate"
								  ng-click="bpmCommon.stopEvent($event); activityTableCtrl.$openProcessDetails(rowData);"
									title="{{i18n('processportal.views-worklistPanel-tooltip-openActivity')}}" class="button-link tbl-tool-link">
								{{rowData.activity.name}}
							</a>
						 </span>
						<span ng-if="rowData.qualityAssuranceState">
							<span ng-if="rowData.qualityAssuranceState ==='IS_REVISED'">
								 <i class="pi pi-revised" style="margin-left: 2px;"></i>
							</span>
							<span ng-if="rowData.qualityAssuranceState === 'IS_QUALITY_ASSURANCE'">
								 <i class="pi pi-clock" style="margin-left: 2px;"></i>
							</span>
						</span>
					</div>

					<div ng-if="activityTableCtrl.isActivityTableMode();">
						<a href="#" ng-click="bpmCommon.stopEvent($event); activityTableCtrl.$openProcessDetails(rowData);" aid="PP-ActivityTable-OpenProcessDetails"
							title="{{i18n('processportal.toolbars-workflowActions-tooltip-processContextExplorer')}}" class="button-link tbl-tool-link">
							{{rowData.activity.name}}
						</a>
					</div>
				</td>

				<td sda-data-type="int">
				</td>

				<td sda-data-type="int" sda-exporter="rowData.criticality.label + ' (' + rowData.criticality.value + ')'">
					<div sd-activity-criticality sda-criticality="rowData.criticality"></div>
				</td>

				<td sda-data-type="int" sda-exporter="rowData.priority.label">
					<div ng-if = "!activityTableCtrl.priorityEditable" sd-process-priority sda-priority="rowData.priority" sda-editable="activityTableCtrl.priorityEditable">
					</div>
					<div ng-if = "activityTableCtrl.priorityEditable" sd-process-priority sda-priority="rowData.priority" sda-editable="activityTableCtrl.priorityEditable"
					    sda-available-priorities ="activityTableCtrl.availablePriorities" sda-on-change ="activityTableCtrl.registerNewPriority( rowData.activityOID, rowData.priority.value)"
					    sda-value-changed="activityTableCtrl.isPriorityChangedForRow(rowData.activityOID);">
					</div>
				</td>

				<td style="text-align: center;" sda-exporter="rowData.benchmark.label">
					<div sd-benchmark-category sda-value="rowData.benchmark"> </div>
				</td>


				<td sda-exporter="activityTableCtrl.getDescriptorExportText(rowData.descriptorValues)">
					<table>
						<tr ng-repeat="desc in rowData.descriptorValues">
							<td ng-if ="!desc.isDocument" style="white-space: nowrap;">{{desc.key}}:</td>
							<td ng-if ="!desc.isDocument" style="white-space: normal;">{{desc.value}}</td>
						</tr>
					</table>
					<div sd-editor-template></div>
				</td>

				<td sda-field="resubmissionTime" sda-data-type="dateTime" ng-if="activityTableCtrl.showResubmissionTime()">
				</td>

				<td sda-field="startTime" sda-data-type="dateTime">
				</td>

				<td sda-field="lastModification" sda-data-type="dateTime">
				</td>
				<td sda-field="duration" style="text-align: center; white-space: nowrap;">
				</td>

				<td sda-field="lastPerformer" ng-if ="activityTableCtrl.isWorklistMode();">
				</td>

				<td sda-field="processInstance.processName">
				</td>

				<td ng-if ="activityTableCtrl.isActivityTableMode();" sda-data-type="int" sda-field="processInstance.oid">
				</td>

				<td sda-field="status.label">
				</td>

				<td sda-field="assignedTo">
				</td>

				<td sda-field="completedBy" ng-if ="activityTableCtrl.isActivityTableMode();">
				</td>

				<td ng-if ="activityTableCtrl.isActivityTableMode();"  sda-field="participantPerformer">
				</td>

				<td sda-column="DESCRIPTOR_COLUMNS" ng-repeat="descCol in activityTableCtrl.descriptorCols" sda-data-type="{{descCol.dataType}}"
					sda-exporter="activityTableCtrl.getDescriptorValueForExport( rowData.descriptorValues[colData.field])">
					<div sd-descriptor-content sda-value="rowData.descriptorValues[colData.field]" sda-data-type ="colData.dataType"> </div>
				</td>

				<td sda-field="rootProcessName" ng-if ="activityTableCtrl.isWorklistMode();">
				</td>

				<td sda-column="TRIVIAL_DATA">
					<div ng-if="rowData.dataMappings">
						<div sd-trivial-manual-activity-data sda-data-mappings="rowData.dataMappings"
							sda-out-data="rowData.inOutData" sda-on-change=activityTableCtrl.changeFormStatus(rowData.activityOID)>
						</div>
					</div>
				</td>

				<td>
					<div style="text-align: right; white-space: nowrap;">
						<button ng-click="bpmCommon.stopEvent($event); activityTableCtrl.$openProcessDetails(rowData);" aid="PP-ActivityTable-OpenProcessDetailsAction"
							title="{{i18n('processportal.toolbars-workflowActions-tooltip-processContextExplorer')}}" class="button-link tbl-tool-link">
							<i class="pi pi-process pi-lg"></i>
						</button>
						<button ng-if="activityTableCtrl.isActivityTableMode();" ng-click="bpmCommon.stopEvent($event); activityTableCtrl.$activateItem(rowData);" aid="PP-ActivityTable-ActivateAction"
							    ng-disabled="!rowData.activatable || rowData.isCaseInstance"	title="{{i18n('processportal.views-worklistPanel-tooltip-openActivity')}}" class="button-link tbl-tool-link">
							<i class="pi pi-activate pi-lg"></i>
						</button>
						<button ng-if="activityTableCtrl.defaultDelegateEnabled"  aid="PP-ActivityTable-DefaultDelegateAction"
							href="#" ng-click="activityTableCtrl.$openDefaultDelegationDialog([rowData]);"
							title="{{i18n('views-common-messages.common-toolTip-delegateToDefaultPerformer')}}"
							class="button-link tbl-toolbar-item tbl-tool-link">
							<i class="pi pi-user pi-lg"></i>
						</button>
						<button sda-column="TRIVIAL_DATA" ng-if="activityTableCtrl.isWorklistMode();"  aid="PP-ActivityTable-CompleteAction"
							ng-disabled="(rowData.dataMappings == undefined) || !rowData.activatable"
							ng-click="bpmCommon.stopEvent($event); activityTableCtrl.$openCompleteDialog(rowData);"
							title="{{i18n('processportal.toolbars-workflowActions-tooltip-complete')}}" class="button-link tbl-tool-link">
							<i class="pi pi-activity-complete pi-lg"></i>
						</button>
						<button ng-click="bpmCommon.stopEvent($event); activityTableCtrl.$openDelegateDialog(rowData);"  aid="PP-ActivityTable-DelegateAction"
							ng-disabled="!rowData.delegable || rowData.defaultCaseActivity"
							title="{{i18n('processportal.toolbars-workflowActions-tooltip-delegate')}}" class="button-link tbl-tool-link">
               				 <i class="pi pi-badge-portrait pi-fw pi-activity-delegate pi-lg pi-left pi-top">
			                    <i class="pi pi-badge-icon pi-badge-icon-arrow-r"></i>
			                 </i>
						</button>
						<button ng-click="bpmCommon.stopEvent($event); activityTableCtrl.$openAbortDialog(rowData);"  aid="PP-ActivityTable-AbortAction"
							ng-disabled="!rowData.abortActivity || rowData.defaultCaseActivity"
							title="{{i18n('processportal.toolbars-workflowActions-tooltip-abort')}}" class="button-link tbl-tool-link" ng-class="{'tbl-tool-joined-link' : activityTableCtrl.isActivityTableMode()}">
							<i class="pi pi-activity-abort pi-lg"></i>
						</button>
						<button ng-if="activityTableCtrl.isActivityTableMode();" class="button-link tbl-tool-link" aid="PP-ActivityTable-AbortPopoverAction"
						    ng-disabled="!rowData.abortProcess || rowData.isCaseInstance"
							title ="{{i18n('views-common-messages.views-abortProcess-menu-tooltip')}}" ng-click="activityTableCtrl.openAbortPopover($event, rowData); bpmCommon.stopEvent($event);" >
							<i class="pi pi-menu-dropdown"></i>
						</button>
						<button ng-click="bpmCommon.stopEvent($event); activityTableCtrl.$openNotes(rowData);" aid="PP-ActivityTable-OpenNotesAction"
						    ng-disabled="rowData.defaultCaseActivity ||rowData.isCaseInstance"
							title="{{i18n('processportal.toolbars-workflowActions-tooltip-notes')}}" class="button-link tbl-tool-link">
							<i class="pi pi-notes-empty pi-lg" ng-if ="rowData.notesCount === 0"></i>
							<i class="pi pi-notes pi-lg" ng-if ="rowData.notesCount > 0 "></i>
						</button>
						<button ng-click="bpmCommon.stopEvent($event); activityTableCtrl.openRelocationDialog(rowData);" aid="PP-ActivityTable-OpenRelocationDialogAction"
						    ng-disabled="!(rowData.relocationEligible)"
							title="{{i18n('processportal.toolbars-workflowActions-relocation-relocate')}}" class="button-link tbl-tool-link">
							<i class="pi pi-rotate-right pi-lg"></i>
							<div sd-dialog sda-modal="true"
								sda-show="rowData.showRelocationDialog" sda-type="confirm"
								sda-title="{{i18n('processportal.toolbars-workflowActions-relocation-dialog-title')}}"
								sda-scope="this"
								sda-template="plugins/html5-process-portal/partials/views/activityRelocationDialog.html"
								sda-on-confirm="activityTableCtrl.relocateActivity(rowData)"
								sda-confirm-action-label="{{i18n('processportal.toolbars-workflowActions-relocation-relocate')}}"
								sda-width="400px" sda-height="70px"
								sda-aid-prefix="RelocationDialog-confirm"></div>
							<div sd-dialog sda-modal="true"
								sda-show="rowData.showNoRelocationTargetsDialog" sda-type="alert"
								sda-title="{{i18n('processportal.toolbars-workflowActions-relocation-dialog-title')}}"
								sda-scope="this"
								sda-template="plugins/html5-process-portal/partials/views/activityRelocationDialog.html"
								sda-confirm-action-label="{{i18n('processportal.toolbars-workflowActions-relocation-relocate')}}"
								sda-cancel-action-label="OK"
								sda-width="400px" sda-height="70px"
								sda-aid-prefix="RelocationDialog-confirm"></div>
						</button>
						<button ng-click="activityTableCtrl.openProcessDocumentsPopover(rowData, $event);" aid="PP-ActivityTable-OpenProcessDocuments"
						    ng-disabled="rowData.defaultCaseActivity ||rowData.isCaseInstance"
							title="{{i18n('processportal.toolbars-workflowActions-tooltip-processDocuments')}}" class="button-link tbl-tool-link">
								<i class="pi pi-process-documents pi-lg"></i>
						</button>
					</div>
				</td>
			</tr>
		</tbody>
	</table>

	<div sd-dialog
		sda-show="activityTableCtrl.showCompleteDialog"
		sda-type="confirm" sda-title="{{activityTableCtrl.completeAllDialog.title}}"
		sda-scope="this" sda-on-open="activityTableCtrl.$completeAll(res)" sda-confirm-action-label="{{activityTableCtrl.completeAllDialog.confirmLabel}}"
	    sda-cancel-action-label="{{activityTableCtrl.completeAllDialog.cancelLabel}}"
		sda-template="plugins/html5-process-portal/scripts/directives/partials/completeActivityDialog.html">
	</div>
	<div sd-dialog
		sda-show="activityTableCtrl.showCompleteNotificationDialog"
		sda-type="alert" sda-title="{{activityTableCtrl.completeActivityResult.title}}"
		sda-scope="this" sda-cancel-action-label="{{i18n('views-common-messages.common-close')}}"
		sda-template="plugins/html5-process-portal/scripts/directives/partials/completeActivityNotfication.html">
	</div>
	<div sd-dialog
		sda-show="activityTableCtrl.updatePriorityNotification.visible"
		sda-type="custom" sda-title="{{i18n('views-common-messages.common-notification-title')}}"
		sda-scope="this"
		sda-template="plugins/html5-process-portal/scripts/directives/partials/updatePriorityNotification.html">
	</div>
	<span sd-delegate-activity-dialog sda-show-dialog="activityTableCtrl.showDelegateDialog" sda-activity-list="activityTableCtrl.selectedActivity"
		sda-on-confirm="activityTableCtrl.refresh()">
	</span>
	<!--Dialog for abort Activity  -->
	<div sd-abort-activity-dialog sda-show-dialog="activityTableCtrl.showAbortActivityDialog" sda-on-abort-complete="activityTableCtrl.showNotificationAndRefresh(notification)"
	     sda-activities-to-abort="activityTableCtrl.activitiesToAbort" >
	</div>
	<!--Dialog for abort Activity Notification -->
   <div style="float: left;" sd-dialog sda-show="activityTableCtrl.showNotificationDialog"
	    sda-title="{{i18n('views-common-messages.common-notification-title')}}"
	    sda-type="custom"
	    sda-scope="this"
	    sda-template="plugins/html5-process-portal/scripts/directives/partials/abortActivityNotification.html">
   </div>

	<span sd-popover="activityTableCtrl.popoverDirective" id="abortMenu">
		<div class="popover-body">
			<div>
				<button ng-disabled="activityTableCtrl.processesToAbort.length < 1" ng-click="activityTableCtrl.openSwitchDialog()"
					class="button-link tbl-toolbar-item tbl-tool-link" style="margin-right: 0px;">
				   {{i18n('views-common-messages.views-switchProcessDialog-Menu-abortandstart')}}
				</button>
			</div>
			<div>
				<button ng-disabled="activityTableCtrl.processesToAbort.length != 1" ng-click="activityTableCtrl.openJoinDialog()"
					class="button-link tbl-toolbar-item tbl-tool-link" style="margin-right: 0px;">
				   {{i18n('views-common-messages.views-switchProcessDialog-Menu-abortandjoin')}}
				</button>
			</div>
		</div>
	</span>
	<span sd-popover="activityTableCtrl.documentPopoverHandle"
		id="processDocuments">
		<div class="popover-body" style="text-align: left; min-width: 120px;">
			<div ng-show="activityTableCtrl.processPopover.data.contentLoaded">
				<div
					ng-if="activityTableCtrl.processPopover.data.supportsProcessAttachments">
					<div class="label-item">
						{{i18n('processportal.toolbars-workflowActions-processDocuments-processAttachments')}}
					</div>
					<div
						ng-show="activityTableCtrl.processPopover.data.processAttachments.documents.length > 0">
						<div
							ng-repeat="doc in activityTableCtrl.processPopover.data.processAttachments.documents">
							<div sd-open-document-link sda-name="doc.name"
								sda-mime-type="doc.contentType" sda-document-id="doc.uuid">
							</div>
						</div>
					</div>
					<div
						ng-hide="activityTableCtrl.processPopover.data.processAttachments.documents.length > 0">
						{{i18n('processportal.toolbars-workflowActions-processDocuments-noProcessAttachments')}}
					</div>
				</div>
				<div
					ng-if="activityTableCtrl.processPopover.data.specificDocuments.length > 0">
					<div class="label-item">
						{{i18n('processportal.toolbars-workflowActions-processDocuments-specificDocuments')}}
					</div>
					<div
						ng-repeat="map in activityTableCtrl.processPopover.data.specificDocuments">

						<div ng-if="map.documents.length > 0" ng-repeat="doc in map.documents">
								<div sd-open-document-link sda-name="map.dataPath.name"
									sda-mime-type="doc.contentType" sda-document-id="doc.uuid">
								</div>
						</div>

						<div ng-if="map.documents.length < 1">
							<span>&lt{{map.dataPath.name}}&gt</span>
						</div>
					</div>
				</div>
				<div
					ng-if="activityTableCtrl.processPopover.data.correspondences.length > 0">
					<div class="label-item">
						{{sdI18n('processportal.toolbars.workflowActions.processDocuments.correspondence')}}
					</div>
					<div
						ng-repeat="folder in activityTableCtrl.processPopover.data.correspondences">
						<a href="#"
							ng-click="activityTableCtrl.openCorrespondenceView(folder)">{{folder.name}}</a>
					</div>
				</div>
				<div
					ng-if="activityTableCtrl.processPopover.data.processAttachments.documents.length > 0 || activityTableCtrl.processPopover.data.specificDocuments.documents.length > 0
					|| activityTableCtrl.processPopover.data.correspondences.length > 0">
					<a href=""
						ng-click="activityTableCtrl.openAllProcessDocumentViews(activityTableCtrl.processPopover.data);">{{i18n('processportal.toolbars-workflowActions-processDocuments-openAllDocuments')}}</a>
				</div>
				<div
					ng-if="!activityTableCtrl.processPopover.data.supportsProcessAttachments && activityTableCtrl.processPopover.data.specificDocuments.length == 0
					&& (!activityTableCtrl.processPopover.data.correspondences || activityTableCtrl.processPopover.data.correspondences.length == 0)">
					{{i18n('processportal.toolbars-workflowActions-processDocuments-noProcessDocuments')}}
				</div>
			</div>
			<div ng-hide="activityTableCtrl.processPopover.data.contentLoaded">
				{{i18n('views-common-messages.common-loading')}}</div>
		</div>
	</span>

	<div sd-join-process-dialog sda-show-dialog="activityTableCtrl.showJoinProcessDialog" sda-on-confirm="activityTableCtrl.joinCompleted"
	     sda-process-instances="activityTableCtrl.processesToAbort" >
	</div>

	<div sd-switch-process-dialog sda-show-dialog="activityTableCtrl.showSwitchProcessDialog" sda-on-confirm="activityTableCtrl.switchCompleted"
	     sda-process-instances="activityTableCtrl.processesToAbort" >
	</div>
</div>
