<div class="worklist-wrapper">
	<div class="worklist-title tbl-title">{{worklistCtrl.title}}</div>
	<div sda-toolbar>
		<button class="button-link" sda-column="TRIVIAL_DATA" href="#" ng-click="worklistCtrl.$completeAll()" title="Complete All" class="tbl-toolbar-item tbl-tool-link">
		   <i class="fa fa-share"></i>
		</button>
	</div>
	<table sd-data-table="{{worklistCtrl.tableHandleExpr}}" sd-data="worklistCtrl.fetchPage(params)" sda-ready="worklistCtrl.ready"
		sda-page-size="{{worklistCtrl.sdaPageSize}}" sda-mode="remote"
		sda-selectable="multiple" sda-initial-selection="{{worklistCtrl.initialSelection}}" sda-selection="{{worklistCtrl.selectionExpr}}"
		sda-on-select="worklistCtrl.onSelect(info)" sda-on-pagination="worklistCtrl.onPagination(info)"
		sda-column-selector="true" sda-preference-delegate="worklistCtrl.preferenceDelegate(prefInfo)"
		sda-on-column-reorder="worklistCtrl.onColumnReorder(info)">
		<thead sda-i18n-scope="processportal.views-worklistPanel-column">
			<tr>
				<th sda-label-key="overview" sda-sortable="true">
					<div sd-filter-template></div>
				</th>
				<th sda-label-key="oid" sda-sortable="true" sda-filterable="" sda-exportable=""></th>
				<th sda-label-key="processName" sda-visible="false" sda-sortable="true"></th>
				<th sda-label-key="started" sda-sortable="true"></th>
				<th sda-label-key="lastmodification" sda-sortable="true"></th>
				<th sda-label-key="descriptors" sda-visible="false"></th>
				<th ng-repeat="descCol in worklistCtrl.descritorCols"
					sda-label="{{descCol.title}}" sda-visible="false" sda-sortable="{{descCol.sortable}}">
				</th>
				<th sda-column="TRIVIAL_DATA" sda-label-key="data"></th>
				<th sda-label-key="actions" sda-fixed="true"></th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td style="white-space: nowrap;">
					<a href="#" ng-click="bpmCommon.stopEvent($event); worklistCtrl.$activateWorkItem(rowData);">
						{{rowData.activity.name}}
					</a>
				</td>
				<td sda-field="oid" sda-data-type="int" style="text-align: center;"></td>
				<td sda-field="processInstance.processName"></td>
				<td sda-field="start" sda-data-type="dateTime" style="text-align: center; white-space: nowrap;"></td>
				<td sda-field="lastModification" sda-data-type="dateTime" style="text-align: center; white-space: nowrap;"></td>
				<td>
					<table>
						<tr ng-repeat="desc in rowData.descriptors">
							<td style="white-space: nowrap;">{{desc.key}}</td>
							<td style="white-space: nowrap;">{{desc.value}}</td>
						</tr>
					</table>
					<div sd-editor-template></div>
				</td>
				<td ng-repeat="descCol in worklistCtrl.descritorCols"
					sda-field="{{descCol.field}}" sda-data-type="{{descCol.dataType}}" style="white-space: nowrap;">
				</td>
				<td sda-column="TRIVIAL_DATA">
					<table ng-hide="!worklistCtrl.worklist.trivialManualActivities[rowData.oid]">
						<tbody>
					    	<tr ng-repeat="mapping in worklistCtrl.worklist.trivialManualActivities[rowData.oid].dataMappings">
					        	<td style="white-space: nowrap;">{{mapping.name}}</td>
					            <td>
					            	<select ng-show="mapping.isEnum" ng-click="bpmCommon.stopEvent($event)"
					      		    	ng-model="worklistCtrl.worklist.trivialManualActivities[rowData.oid].inOutData[mapping.id]"
					                    ng-init="worklistCtrl.worklist.trivialManualActivities[rowData.oid].inOutData[mapping.id] = worklistCtrl.worklist.trivialManualActivities[rowData.oid].inOutData[mapping.id] || mapping.enumValues[0]"
					                    ng-options="enumVal for enumVal in mapping.enumValues">
									</select>
					                  
									<input type="text" ng-click="bpmCommon.stopEvent($event)"
					                	ng-show="mapping.typeName == 'java.lang.String'"
					                    ng-model="worklistCtrl.worklist.trivialManualActivities[rowData.oid].inOutData[mapping.id]" />
					
									<input type="checkbox" ng-click="bpmCommon.stopEvent($event)"
										ng-show="mapping.typeName == 'java.lang.Boolean'"
										ng-model="worklistCtrl.worklist.trivialManualActivities[rowData.oid].inOutData[mapping.id]" />
								</td>
							</tr>
						</tbody>
					</table>
				</td>
				<td style="white-space: nowrap; text-align: right;">
					<a href="#" ng-click="bpmCommon.stopEvent($event); worklistCtrl.$openNotes(rowData);"
						title="Open Notes" class="view-tool-link">
						<i class="fa fa-comment-o"></i>
					</a>
					<a href="#" ng-click="bpmCommon.stopEvent($event); worklistCtrl.$openProcessHistory(rowData);"
						title="Process History" class="view-tool-link">
						<i class="fa fa-tasks"></i>
					</a>
					<a sda-column="TRIVIAL_DATA" href="#"
						ng-disabled="!worklistCtrl.worklist.trivialManualActivities[rowData.oid]" 
						ng-click="bpmCommon.stopEvent($event); worklistCtrl.$complete(rowData);"
						title="Complete" class="view-tool-link">
						<i class="fa fa-share"></i>
					</a>
					<a href="#" ng-click="bpmCommon.stopEvent($event); worklistCtrl.$openDelegateDialog(rowData);"
						title="Delegate" class="view-tool-link">
						<i class="fa fa-user"></i>
					</a>
				</td>
			</tr>
		</tbody>
	</table>
</div>