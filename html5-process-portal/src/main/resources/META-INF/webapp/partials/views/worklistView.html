<div class="view-panel" ng-controller="sdWorklistViewCtrl as worklistViewCtrl" sg-stretch-to-bottom>
	<!-- View Toolbar -->
	<div sd-include="'plugins/html5-process-portal/partials/views/worklistViewToolbar.html'"></div>

	<!-- View Content -->
	<div class="view-panel-content">
		<h4>{{i18n('html5-process-portal.views-worklistViewHtml5-labelTitle')}}</h4>
		<br/>

		<div sda-toolbar>
			<a href="#" ng-click="worklistViewCtrl.completeAll()" title="Complete All" class="tbl-toolbar-item tbl-tool-link">
			   <i class="fa fa-share"></i>
			</a>
		</div>
		<table sd-data-table="worklistDataTable" sd-data="worklistViewCtrl.fetchPage(params)" sda-ready="worklistViewCtrl.ready"
			sda-page-size="5">
			<thead sda-i18n-scope="processportal.views-worklistPanel-column">
				<tr>
					<th sda-label="overview" sda-sortable="true">
						<div sd-filter-template></div>
					</th>
					<th sda-label="oid" sda-sortable="true" sda-filterable="" sda-exportable=""></th>
					<th sda-label="processName" sda-sortable="true"></th>
					<th sda-label="started" sda-sortable="true"></th>
					<th sda-label="lastmodification" sda-sortable="true"></th>
					<th sda-label="descriptors"></th>
					<th ng-repeat="descCol in worklistViewCtrl.descritorCols" sda-sortable="{{descCol.sortable}}">
						{{descCol.title}}
					</th>
					<th>Data</th>
					<th sda-label="actions"></th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td sda-field="name">
						<a href="#" ng-click="worklistViewCtrl.activateWorkItem(rowData)">
							{{rowData.activity.name}}
						</a>
					</td>
					<td sda-field="oid" sda-data-type="int"></td>
					<td sda-field="processInstance.processName" ></td>
					<td sda-field="start" sda-data-type="dateTime"></td>
					<td sda-field="lastModification" sda-data-type="dateTime"></td>
					<td>
						<table>
							<tr ng-repeat="desc in rowData.descriptors">
								<td>{{desc.key}}</td>
								<td>{{desc.value}}</td>
							</tr>
						</table>
						<div sd-editor-template></div>
					</td>
					<td ng-repeat="descCol in worklistViewCtrl.descritorCols"
						sda-field="{{descCol.field}}" sda-data-type="{{descCol.dataType}}"></td>
					<td>
						<table ng-hide="!worklistViewCtrl.worklist.trivialManualActivities[rowData.oid]">
							<tbody>
						    	<tr ng-repeat="mapping in worklistViewCtrl.worklist.trivialManualActivities[rowData.oid].dataMappings">
						        	<td>{{mapping.name}}</td>
						            <td>
						            	<select ng-show="mapping.isEnum"
						      		    	ng-model="worklistViewCtrl.worklist.trivialManualActivities[rowData.oid].inOutData[mapping.id]"
						                    ng-init="worklistViewCtrl.worklist.trivialManualActivities[rowData.oid].inOutData[mapping.id] = worklistViewCtrl.worklist.trivialManualActivities[rowData.oid].inOutData[mapping.id] || mapping.enumValues[0]"
						                    ng-options="enumVal for enumVal in mapping.enumValues">
										</select>
						                  
										<input type="text"
						                	ng-show="mapping.typeName == 'java.lang.String'"
						                    ng-model="worklistViewCtrl.worklist.trivialManualActivities[rowData.oid].inOutData[mapping.id]" />
						
										<input type="checkbox" ng-show="mapping.typeName == 'java.lang.Boolean'"
											ng-model="worklistViewCtrl.worklist.trivialManualActivities[rowData.oid].inOutData[mapping.id]" />
									</td>
								</tr>
							</tbody>
						</table>
					</td>
					<td>
						<a href="#" ng-click="worklistViewCtrl.openNotes(rowData)" title="Open Notes" class="view-tool-link">
							<i class="fa fa-comment-o"></i>
						</a>
						<a href="#" ng-click="worklistViewCtrl.openProcessHistory(rowData)" title="Process History" class="view-tool-link">
							<i class="fa fa-tasks"></i>
						</a>
						<a href="#" ng-click="worklistViewCtrl.complete(rowData)" title="Complete" class="view-tool-link">
							<i class="fa fa-share"></i>
						</a>
						<a href="#" ng-click="worklistViewCtrl.openDelegateDialog(rowData)" title="Delegate" class="view-tool-link">
							<i class="fa fa-user"></i>
						</a>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>