<table cellpadding="0" cellspacing="0" style="width: 100%;">
	<tr ng-repeat="document in scannedDocuments"
		ng-init="document.showChildren=false;document.urlFragStamp=getTimeStamp()"
		id="scannedDocumentDivision{{$index}}" class="scannedDocument">
		<td>
			<div ng-show="!document.showChildren" class="formTable">

				<div style="height: {{100+ 3*clamp(document.pages.length, 0, 5)}}px;"
					 class="imageStack"
					 ng-mousedown="resetPageModel()"
					 ng-click="selectPage(document.pages[0],document.url,$event,document)">
					<img ng-src="{{document.url}}0#{{uiModel.docPanelRefreshStamp}}" style="height: 100px;"
						title="Page {{(clamp(document.pages.length,0,5))-$index}} of {{document.pages.length}}"
						ng-repeat="page in document.pages | limitTo: 5" />
				</div>


				<div class="verticalMenu2"
				     id="vm{{$id}}">
					<i class="fa fa-check go"
					   ng-mouseover="openDocumentRefPopup('body',document.uuid,$event)"
					   ng-show="getReferenceCount(document.uuid)>0">
					</i> 
					<i class="fa"
						title="Expand/Collapse Pages" ng-show="document.pages.length>0"
						ng-class="{'fa-caret-down':document.showChildren,'fa-caret-right':!document.showChildren}"
						ng-click="document.showChildren=!document.showChildren;resetPageModel()">
					</i>
					<i class="fa fa-sort-numeric-desc"
					   ng-click="reversePages(document)"
					   title="Reverse Page Order">
					</i>
				</div>
				
				<div class="documentInfo">
					<span>{{document.name}}</span>
				</div>
				
			</div>
			<div class="documentHeader reorderTarget" 
			     data-page-number="0"
			     ng-show="document.showChildren">
				{{document.name}} 
			</div>
			<div ng-show="document.showChildren"
			     data-doc-url="{{document.url}}"
			     data-doc-uuid = "{{document.uuid}}"
			     data-page-index = "{{$index}}"
				 ng-repeat="page in document.pages" 
				 class="page reorderable">
				<table ng-class="{'selected':isPageSelected(page),'unselected':!isPageSelected(page)}">
					<tr>
						<td style="text-align:center;">
							<a style="display: inline;"
							   ng-click="selectPage(page,document.url ,$event,document)">
								<img ng-if="document.showChildren"
									 class="page-instance" 
									 ng-src="{{document.url + $index}}?{{document.urlFragStamp}}" />
							</a>
							<div class="verticalMenu2">
								<i title="Collapse"
								   ng-click="document.showChildren=false;resetPageModel()"
								   class="fa fa-caret-down menu-icon">
								</i>
								<i ng-if="$index==0"
								   class="fa fa-sort-numeric-desc"
								   ng-click="reversePages(document)"
								   title="Reverse Page Order">
								</i>
							</div>
							<div data-page-number="{{page.number}}" class="reorderTarget">
								{{page.number}}
							</div>
						</td>
					</tr>
				</table>
				<div class="normalLine" ng-show="mode == 'normal'"></div>
				<div class="cutLine" ng-show="mode == 'cut'"></div>
			</div>
			<div style="height: 5px; background-color: white;"></div>
		</td>
	</tr>
</table>
