<html>
<head>
<link
	href='http://fonts.googleapis.com/css?family=Lato:400,700,300italic,400italic'
	rel='stylesheet' type='text/css'>
<link href="./css/font-awesome-4.1.0/css/font-awesome.css"
	rel="stylesheet">
<link href='./css/stardust-modern.css' rel='stylesheet' />
<link href='./css/thirdparty/jquery/jquery-ui-1.10.2.custom.min.css'
	rel='stylesheet' />
<script data-main="./js/DocumentAssignmentPanelMain"
	src="./js/libs/require/2.0.5/require-min.js"></script>
<style>
.section {
	border: 1px solid #e0e0e0;
}

.scannedDocument td {
	border-bottom: 1px dashed #dddddd;
	background-color: #E8E6FC;
}

.page:hover {
	cursor: move;
}

.pendingProcessesTree td {
	padding: 3px !important;
}

.pendingProcessesTree i {
	color: #A69A88;
}

.selected {
	background-color: #dddddd;
}

.selected td {
	background-color: #dddddd;
}

.highlighted td {
	background-color: #E8E6FC;
}

.dragHelper {
	font-size: 11px;
	color: black;
	background-color: white !important;
}

.normalLine {
	margin-bottom: 2px;
	padding-bottom: 3px;
}

.cutLine {
	width: 100%;
	padding-bottom: 2px;
	border-bottom: 1px dashed #AAAAAA;
	margin-bottom: 2px;
	padding-bottom: 2px;
}

.pendingProcessesTree td {
	padding: 0 !important;
	margin: 0 !important;
}

.pendingProcessesTree td>div {
	padding: 3px !important;
}

.cutLine:hover {
	background-color: #dddddd;
}
</style>
</head>
<body>
	<div id="docRendevous"
		ng-controller="documentAssignmentPanelController">
		<table class="layoutTable" style="width: 100%; height: 100%">
			<tr valign="top">
				<td>
					<table class="layoutTable" style="width: 100%;">
						<tr>
							<td>
								<div class="section" style="margin-bottom: 10px; padding: 10px;">
									<table class="formTable">
										<tr>
											<td><label>Business Object</label></td>
											<td><select ng-model="businessObject"
												ng-options="businessObject as businessObject.label for businessObject in businessObjects"
												ng-change="onBusinessObjectChanged()"></select></td>
										</tr>
									</table>
									<div ng-show="businessObject != null">
										<table class="formTable">
											<tr>
												<td><label>{{primaryKeyField.name}}</label> <input
													type="text" style="width: 100px; margin-left: 5px;"
													ng-model="primaryKeyField.filterValue"
													ng-blur="filterBusinessObjects()"></input></td>
												<td ng-repeat="field in keyFields"><label
													style="margin-left: 5px;">{{field.name}}</label> <input
													type="text" style="width: 100px; margin-left: 5px;"
													ng-model="keyField.filterValue"
													ng-blur="filterBusinessObjects()"></input></td>
											</tr>
										</table>
										<div class="dataTableFrame"
											style="margin-top: 10px; margin-bottom: 20px;">
											<table cellpadding="0" cellspacing="0" class="dataTable"
												style="width: 100%;">
												<thead>
													<tr>
														<th>Member No</th>
														<th>Member Name</th>
														<th>Scheme #</th>
														<th>Scheme Name</th>
														<th>National ID</th>
														<th>Product</th>
													</tr>
												</thead>
												<tbody>
													<tr sd-table-data="businessObject in businessObjects"
														sd-table-selection="selectedBusinessObjects"
														sd-table-selection-changed="onBusinessObjectSelectionChange()">
														<td>{{businessObject.memberId}}</td>
														<td>{{businessObject.lastName}}
															{{businessObject.firstName}}</td>
														<td>{{businessObject.scheme}}</td>
														<td>{{businessObject.schemeName}}</td>
														<td>{{businessObject.nationalID}}</td>
														<td>Tier-1</td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
								</div>
							</td>
						</tr>
						<tr valign="top">
							<td>
								<table style="width: 100%;">
									<tr valign="top">
										<td style="width: 50%;">
											<table class="toolbar" style="width: 100%;">
												<tr>
													<td><table class="formTable">
															<tr>
																<td><a href="#" class="iconLink"
																	ng-click="rotatePage()"><i
																		class="fa fa-rotate-right"></i></a></td>
																<td><input type="number" style="text-align: right;"
																	ng-model="zoomFactor"></input> <label>%</label></td>
																<td><a href="#" class="iconLink"
																	ng-click="zoomInPage()"><i
																		class="fa fa-plus-circle"></i></a></td>
																<td><a href="#" class="iconLink"
																	ng-click="zoomOutPage()"><i
																		class="fa fa-minus-circle"></i></a></td>
																<td><a href="#" class="iconLink"
																	ng-click="invertPage()"><i
																		class="fa fa-star-half-o"></i></a></td>
															</tr>
														</table></td>
												</tr>
											</table>
											<div class="section"
												style="height: 400px; overflow: auto; margin-top: 10px; margin-bottom: 10px; max-width: 800px;">
												<img id="pageImage" src={{selectedPage.url}}
													ng-show="selectedPage != null" />
											</div>
										</td>
										<td style="width: 50%; padding-left: 10px !important;">
											<h2>Pending Processes and Activities</h2>
											<div class="section"
												style="min-height: 20px; max-height: 250px; overflow: auto; margin-top: 10px; margin-bottom: 10px;">
												<table cellpadding="0" cellspacing="0"
													class="pendingProcessesTree">
													<tr ng-repeat="treeItem in pendingProcessesTree"
														id="pendingProcessesTreeRow{{$index}}"
														class="{{getTreeItemClass(treeItem)}}">
														<td>
															<div ng-show="treeItem.pendingProcess">
																<i class="fa fa-gears"></i>
															</div>
															<div style="margin-left: 10px;"
																ng-show="treeItem.pendingProcess.descriptors.length >0">
																<i class="fa fa-tag"></i>
															</div>
															<div ng-show="treeItem.pendingActivityInstance"
																style="margin-left: 10px;">
																<i class="fa fa-gear"></i>
															</div>
															<div ng-show="treeItem.specificDocument"
																style="margin-left: 10px;">
																<span ng-hide="treeItem.specificDocument.url"><i
																	class="fa fa-file-o"></i></span> <span
																	ng-show="treeItem.specificDocument.url"><i
																	class="fa fa-file"></i></span>
															</div>
															<div ng-show="treeItem.processAttachments != null"
																style="margin-left: 10px;">
																<i class="fa fa-folder-o"></i>
															</div>
															<div ng-show="treeItem.processAttachment"
																style="margin-left: 20px;">
																<i class="fa fa-file"></i>
															</div>
														</td>
														<td><div ng-show="treeItem.pendingProcess">{{treeItem.pendingProcess.processDefinition.name}}
																(#{{treeItem.pendingProcess.oid}})
																{{$parent.formatTimestamp(treeItem.pendingProcess.start)}}</div>
															<div
																ng-show="treeItem.pendingProcess.descriptors.length >0">
																Descriptors- <span
																	ng-repeat="item in treeItem.pendingProcess.descriptors">
																	<span ng-if="item.value != ''">{{item.name}}:{{item.value}}</span>
																	<span ng-if="!$last && item.value != ''">, </span>
																</span>
															</div>
															<div ng-show="treeItem.pendingActivityInstance">{{treeItem.pendingActivityInstance.activity.name}}
																(#{{treeItem.pendingActivityInstance.oid}})
																{{$parent.formatTimestamp(treeItem.pendingActivityInstance.start)}}</div>
															<div ng-show="treeItem.specificDocument">
																{{treeItem.specificDocument.name}} <span
																	ng-show="treeItem.specificDocument.url">({{$parent.formatTimestamp(treeItem.specificDocument.creationTimestamp)}})</span>
															</div>
															<div ng-show="treeItem.processAttachments">Process
																Attachments</div>
															<div ng-show="treeItem.processAttachment">{{treeItem.processAttachment.type}}
																({{$parent.formatTimestamp(treeItem.processAttachment.creationTimestamp)}})</div>
														</td>
													</tr>
												</table>
											</div>
											<h2>Startable Processs</h2>
											<div class="section"
												style="min-height: 20px; max-height: 150px; overflow: auto; margin-top: 10px; margin-bottom: 10px;">
												<table cellpadding="0" cellspacing="0"
													class="pendingProcessesTree">
													<tr ng-class="{treeBranch:treeItem.startableProcess}"
														ng-repeat="treeItem in startableProcessesTree"
														id="startableProcessesTreeRow{{$index}}"
														class="{{getTreeItemClass(treeItem)}}">
														<td><div ng-show="treeItem.startableProcess">
																<i class="fa fa-gears"></i>
															</div>
															<div ng-show="treeItem.specificDocument"
																style="margin-left: 10px;">
																<i class="fa fa-file-o"></i>
															</div>
															<div ng-show="treeItem.processAttachments.length >=0"
																style="margin-left: 10px;">
																<i class="fa fa-folder-o"></i>
															</div></td>
														<td>
															<div ng-show="treeItem.startableProcess">{{treeItem.startableProcess.name}}</div>
															<div ng-show="treeItem.specificDocument">
																{{treeItem.specificDocument.name}}</div>

															<div ng-show="treeItem.processAttachments.length >=0">Process
																Attachments</div>
															<div ng-show="treeItem.processAttachment"
																xstyle="margin-left: 10px;">
																<i class="fa fa-file"></i>
																{{treeItem.processAttachment.type}}
																{{treeItem.processAttachment.name}}
																({{$parent.formatTimestamp(treeItem.processAttachment.creationTimestamp)}})
															</div>


														</td>
														<td
															ng-if="treeItem.startableProcess && selectedBusinessObjects.length >0 && treeItem.startableProcess.processAttachments.length > 0">
															<a class="iconLink" href="#"><i
																ng-click="startProcess(treeItem,selectedBusinessObjects)"
																class="fa fa-rocket"></i></a>
														</td>
													</tr>
												</table>
											</div>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
				<td style="width: 200px;">
					<table class="toolbar" style="width: 100%;">
						<tr>
							<td><table class="formTable">
									<tr>
										<td><a href="#" class="iconLink" ng-click="mode = 'cut'"
											ng-show="mode == 'normal'"><i class="fa fa-cut"></i></a><a
											href="#" class="iconLink" ng-click="mode = 'normal'"
											ng-show="mode == 'cut'"><i class="fa fa-reply"></i></a></td>
									</tr>
								</table></td>
						</tr>
					</table>
					<div class="section"
						style="width: 100%; height: 500px; overflow: auto; margin: 10px;">
						<table cellpadding="0" cellspacing="0" style="width: 100%;">
							<tr ng-repeat="document in scannedDocuments"
								id="scannedDocumentDivision{{$index}}" class="scannedDocument">
								<td>
									<table class="formTable">
										<tr>
											<td><span style="font-size: 9px;">{{document.name}}
													{{$parent.formatTimestamp(document.creationTimestamp)}}
													{{document.contentType}}</span></td>
										</tr>
										<tr>
											<td ng-if="0"><select ng-model="document.type"><option>Select
														Document Type ...</option>
													<option value="Birth Certificate">Birth
														Certificate</option></select></td>
										</tr>
									</table>
									<div ng-repeat="page in document.pages" class="page">
										<table class="{{$parent.$parent.selectionClass(page)}}">
											<tr>
												<td align="right">{{page.number}}</td>
												<td><a
													ng-click="$parent.$parent.selectPage(page,document.url + $index)">
														<img src="{{document.url + $index}}" width="40%" />
												</a></td>
											</tr>
										</table>
										<div class="normalLine" ng-show="mode == 'normal'"></div>
										<div class="cutLine" ng-show="mode == 'cut'"></div>
									</div>
									<div style="height: 5px; background-color: white;"></div>
								</td>
							</tr>
						</table>
					</div>
				</td>
			</tr>
		</table>
		<div sd-dialog="startProcessDialog" style="visibility: hidden;">
			<table cellpadding="0" cellspacing="0"
				style="width: 100%; margin-top: 10px;">
				<tr>
					<td>The process <strong>{{startProcessDialog.startableProcess.name}}</strong>
						was started with the selected document.
					</td>
				</tr>
			</table>
			<table cellpadding="0" cellspacing="0"
				style="width: 100%; margin-top: 10px;">
				<tr>
					<td align="center">
						<table cellpadding="0" cellspacing="0">
							<tr>
								<td><input type="button" class="button" value="Close"
									ng-click="closeStartProcessDialog()" /></td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</div>
	</div>
</body>
</html>