<html>
<head>
<link
	href='http://fonts.googleapis.com/css?family=Lato:400,700,300italic,400italic'
	rel='stylesheet' type='text/css'>
<link href="./css/font-awesome-4.1.0/css/font-awesome.css"
	rel="stylesheet">
<link href='./css/stardust-modern.css' rel='stylesheet' />
<link href='./css/thirdparty/jquery/jquery-ui-1.10.2.custom.min.css'
	rel='stylesheet' />
<script data-main="./js/DocumentAssignmentPanelMain"
	src="./js/libs/require/2.0.5/require-min.js"></script>
<style>
.section {
	border: 1px solid #e0e0e0;
}

.sectionTitle{
	font-weight: 400;
	font-size: 14px;
	color: #A69A88;
	text-transform: uppercase;
}

.sectionTitle > label{
	float:right;
}

.scannedDocument td {
	border-bottom: 1px dashed #dddddd;
	background-color: #E8E6FC;
}

.page:hover {
	cursor: move;
}

.stackPage{
	margin-bottom:10px;
	display:inline-block;
}

.stackPage > div{
	width:68px;
	height:100px;
	background-color:#FFF;
	background-size:68px 100px;
	border:solid 1px #AAA;
	position:relative;
	display:inline-block;
	box-shadow: 3px 3px 20px #888888;
}
.stackPage :nth-child(2){
	margin-left:-63px;
	top:2px;
}
.stackPage :nth-child(3){
	margin-left:-63px;
	top:4px;
}

.documentHeader{
	text-align:center;
	padding:3px;
}
.verticalMenu{
	display: inline-block;
	padding: 3px;
	x-border: solid 1px #AAA;
	x-background: #EEE;
	border-radius: 4px;
	margin-left:5px;
	text-align:center;
	position:relative;
	top:-75px;
	height:100px;
}

.verticalMenu > i{
	display:block;
	color:#A69A88;
	cursor:pointer;
	font-size:1.4em;
}

.verticalMenu > i:last-child{
	position: absolute;
	bottom: 0;
	left:6px;
}

.verticalMenu2{
	display: inline-block;
	padding: 3px;
	x-border: solid 1px #AAA;
	x-background: #EEE;
	border-radius: 4px;
	margin-left:5px;
	text-align:center;
	position:relative;
}

.verticalMenu2 > i{
	display:block;
	color:#A69A88;
	cursor:pointer;
	font-size:1.4em;
}

.pageNumber{
	position:relative;
	left:40px;
}
.documentInfo{
	text-align:center;
}

.documentInfo > span{
	display:block;
}

.pendingProcessesTree td {
	left:10px;
	top:10px;
}

.pendingProcessesTree i {
	color: #A69A88;
}

.selected {
	background-color: #dddddd;
}

.selected td {
	background-color: #dddddd;
}

.highlighted td {
	background-color: #E8E6FC;
}

.dragHelper {
	font-size: 11px;
	color: black;
	background-color: white !important;
}

.normalLine {
	margin-bottom: 2px;
	padding-bottom: 3px;
}

.cutLine {
	width: 100%;
	padding-bottom: 2px;
	border-bottom: 1px dashed #AAAAAA;
	margin-bottom: 2px;
	padding-bottom: 2px;
}

.pendingProcessesTree td {
	padding: 0 !important;
	margin: 0 !important;
}

.pendingProcessesTree td>div {
	padding: 3px !important;
}

.cutLine:hover {
	background-color: #dddddd;
}
</style>
</head>
<body>
	<div id="docRendevous"
		 ng-controller="documentAssignmentPanelController">
		<table class="layoutTable" style="width: 100%; height: 100%">
			<tr valign="top">
				<td>
					<table class="layoutTable" style="width: 100%;">
						<tr>
							<td>
								<div
									ng-include="'../business-object-management/businessObjectSearchPanel.html'"></div>
							</td>
						</tr>
						<tr valign="top">
							<td>
								<table style="width: 100%;">
									<tr valign="top">
										<td style="width: 50%;">
											<table class="toolbar" style="width: 100%;">
												<tr>
													<td><table class="formTable">
															<tr>
																<td><a href="#" class="iconLink"
																	ng-click="rotatePage()"><i
																		class="fa fa-rotate-right"></i></a></td>
																<td><input type="number" style="text-align: right;"
																	ng-model="zoomFactor"></input> <label>%</label></td>
																<td><a href="#" class="iconLink"
																	ng-click="zoomInPage()"><i
																		class="fa fa-plus-circle"></i></a></td>
																<td><a href="#" class="iconLink"
																	ng-click="zoomOutPage()"><i
																		class="fa fa-minus-circle"></i></a></td>
																<td><a href="#" class="iconLink"
																	ng-click="invertPage()"><i
																		class="fa fa-star-half-o"></i></a></td>
															</tr>
														</table></td>
												</tr>
											</table>
											<div class="section"
												style="height: 400px; overflow: auto; margin-top: 10px; margin-bottom: 10px; max-width: 800px;">
												<img id="pageImage" src={{selectedPage.url}}
													ng-show="selectedPage != null" />
											</div>
										</td>
										<td style="width: 50%; padding-left: 10px !important;">
											<div>
												<span class="sectionTitle">
													Pending Processes and Activities
												</span>
												<label style="float:right">
													<input type="checkbox" name="showCompleted" value="value" />
													Show Completed
												</label>
											</div>
											
											<div class="section"
												style="min-height: 20px; max-height: 250px; overflow: auto; margin-top: 10px; margin-bottom: 10px;">
												<table cellpadding="0" cellspacing="0"
													class="pendingProcessesTree">
													<tr ng-repeat="treeItem in pendingProcessesTree"
														id="pendingProcessesTreeRow{{$index}}"
														class="{{getTreeItemClass(treeItem)}}">
														<td>
															<div ng-show="treeItem.pendingProcess">
																<i class="fa fa-gears"></i>
															</div>
															<div style="margin-left: 10px;"
																ng-show="treeItem.pendingProcess.descriptors.length > 0">
																<i class="fa fa-tag"></i>
															</div>
															<div ng-show="treeItem.pendingActivityInstance"
																style="margin-left: 10px;">
																<i class="fa fa-gear"></i>
															</div>
															<div ng-show="treeItem.specificDocument"
																style="margin-left: 10px;">
													
															    <i class="fa" 
															       ng-class="{'fa-file':!treeItem.specificDocument.isEmpty,'fa-file-o':treeItem.specificDocument.isEmpty}">
															    </i>
															</div>
															<div ng-show="treeItem.processAttachments != null"
																style="margin-left: 10px;">
																<i class="fa fa-folder-o"></i>
															</div>
															<div ng-show="treeItem.processAttachment"
																style="margin-left: 20px;">
																<i class="fa fa-file"></i>
															</div>
														</td>
														<td><div ng-show="treeItem.pendingProcess">{{treeItem.pendingProcess.processDefinition.name}}
																(#{{treeItem.pendingProcess.oid}})
																&nbsp;
																<i ng-click="openProcessHistory(treeItem)" 
																   title="Process History"
																   class="fa fa-info-circle"></i>
																</div>
															<div
																ng-show="treeItem.pendingProcess.descriptors.length > 0">
																<span
																	ng-repeat="item in treeItem.pendingProcess.descriptors">
																	<span ng-show="item.value != null && item.value.length">{{item.name}}:
																		{{item.value}}</span><span
																	ng-hide="$last || item.value == null || !item.value.length">,
																</span>
																</span>
															</div>
															<div ng-show="treeItem.pendingActivityInstance">{{treeItem.pendingActivityInstance.activity.name}}
																(#{{treeItem.pendingActivityInstance.oid}})
															</div>
															<div ng-show="treeItem.specificDocument">
																{{treeItem.specificDocument.name}}
															</div>
															<div ng-show="treeItem.processAttachments.length >=0">Process
																Attachments</div>
															<div ng-show="treeItem.processAttachment">
																{{treeItem.processAttachment.type}}
																{{treeItem.processAttachment.name}}						
																<select ng-select 
																        ng-model="treeItem.selectedDocType"
																        ng-change="setDocumentType(treeItem.selectedDocType,treeItem)"
																	    ng-options="item.name for item in documentTypes">
																</select>
															</div>
														</td>
													</tr>
												</table>
											</div>
											<h2>Startable Processes</h2>
											<div class="section"
												style="min-height: 20px; max-height: 150px; overflow: auto; margin-top: 10px; margin-bottom: 10px;">
												<table cellpadding="0" cellspacing="0"
													class="pendingProcessesTree">
													<tr ng-class="{treeBranch:treeItem.startableProcess}"
														ng-repeat="treeItem in startableProcessesTree"
														id="startableProcessesTreeRow{{$index}}"
														class="{{getTreeItemClass(treeItem)}}">
														<td><div ng-show="treeItem.startableProcess">
																<i class="fa fa-gears"></i>
															</div>
															<div ng-show="treeItem.specificDocument"
																style="margin-left: 10px;">
																<i ng-hide="treeItem.specificDocument.url"
																	class="fa fa-file-o"></i> <i
																	ng-show="treeItem.specificDocument.url"
																	class="fa fa-file"></i>
															</div>
															<div ng-show="treeItem.processAttachments.length >=0"
																style="margin-left: 10px;">
																<i class="fa fa-folder-o"></i>
															</div></td>
														<td>
															<div ng-show="treeItem.startableProcess">{{treeItem.startableProcess.name}}</div>
															<div ng-show="treeItem.specificDocument">
																{{treeItem.specificDocument.name}}
															</div>
															<div ng-show="treeItem.processAttachments.length >=0">Process
																Attachments</div>
															<div ng-show="treeItem.processAttachment">
																<i class="fa fa-file"></i>
																&nbsp;{{treeItem.processAttachment.name}}
																<select ng-select
																	ng-model="treeItem.processDetails.selectedDocType"
																	ng-options="item.name for item in documentTypes">
																</select>
															</div>


														</td>
														<td ng-if="processCanStart(treeItem);"><a
															class="iconLink" href="#">
															<i	title="Start Process"
																ng-click="startProcess(treeItem,selectedBusinessObjectInstances[0])"
																class="fa fa-rocket">
															</i></a></td>
													</tr>
												</table>
											</div>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
				<td style="width: 200px;">
					<table class="toolbar" style="width: 100%;">
						<tr>
							<td><table class="formTable">
									<tr>
										<td><a href="#" class="iconLink" ng-click="mode = 'cut'"
											ng-show="mode == 'normal'"><i class="fa fa-cut"></i></a><a
											href="#" class="iconLink" ng-click="mode = 'normal'"
											ng-show="mode == 'cut'"><i class="fa fa-reply"></i></a></td>
									</tr>
								</table></td>
						</tr>
					</table>
					<div class="section"
						style="width: 100%; height: 500px; overflow: auto; margin: 10px;">
						<table cellpadding="0" cellspacing="0" style="width: 100%;">
							<tr ng-repeat="document in scannedDocuments"
								id="scannedDocumentDivision{{$index}}" class="scannedDocument">
								<td>
									<table ng-show="!uiModel.showChildren" 
									       class="formTable">
										<tr>
											<td colspan="2">
												<div class="stackPage"
													 ng-click="$parent.selectPage(document.pages[0],document.url + 0,$event,document.pages)">
													<div></div>
													<div></div>
													<div style="background-image:url({{document.url}}0)">
													</div>
												</div>					

											
												<div class="verticalMenu2">
													<i class="fa fa-warning"></i>
													<i title="Reverse Pages" class="fa fa-arrows-h"></i>
													<i class="fa" 
													   title="Expand/Collapse Pages"
													   ng-show="document.pages.length>0"
													   ng-class="{'fa-caret-down':uiModel.showChildren,'fa-caret-up':!uiModel.showChildren}" 
													   ng-click="uiModel.showChildren=!uiModel.showChildren">
													</i>
												</div>
												
											</td>
										<tr>
										<tr>
											<td colspan="2">
												<div class="documentInfo">
													<span>{{document.name}}</span>
												</div>
											</td>
										<tr>
									</table>
									<div class="documentHeader" ng-show="uiModel.showChildren">{{document.name}}</div>
									<div ng-show="uiModel.showChildren" 
									     ng-repeat="page in document.pages" 
									     class="page">
										<table ng-class="{'selected':isPageSelected(page),'unselected':!isPageSelected(page)}">
											<tr>
												<td>
													<a style="display:inline;" ng-click="$parent.$parent.selectPage(page,document.url + $index,$event,document.pages)">
														<img src="{{document.url + $index}}" width="40%" />
													</a>
													<div class="verticalMenu2">
														<i style="display:block;" class="fa fa-warning"></i>
														<i title="Move Page Up" style="display:block;" class="fa fa-arrow-up"></i>
														<i title="Move Page Down" style="display:block;" class="fa fa-arrow-down"></i>
														<i title="Collapse" style="display:block;" ng-click="uiModel.showChildren=false" class="fa fa-caret-up"></i>
													</div>
													<div class="pageNumber">{{page.number}}</div>
												</td>
											</tr>
										</table>
										<div class="normalLine" ng-show="mode == 'normal'"></div>
										<div class="cutLine" ng-show="mode == 'cut'"></div>
									</div>
									<div style="height: 5px; background-color: white;"></div>
								</td>
							</tr>
						</table>
					</div>
				</td>
			</tr>
		</table>
		<div sd-dialog="startProcessDialog" style="visibility: hidden;">
			<table cellpadding="0" cellspacing="0"
				style="width: 100%; margin-top: 10px;">
				<tr>
					<td>The process <strong>{{startProcessDialog.startableProcess.name}}</strong>
						was started with the selected document.
					</td>
				</tr>
			</table>
			<table cellpadding="0" cellspacing="0"
				style="width: 100%; margin-top: 10px;">
				<tr>
					<td align="center">
						<table cellpadding="0" cellspacing="0">
							<tr>
								<td><input type="button" class="button" value="Close"
									ng-click="closeStartProcessDialog()" /></td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</div>
	</div>
</body>
</html>