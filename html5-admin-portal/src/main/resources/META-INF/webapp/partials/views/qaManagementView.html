<div class="view-panel" ng-controller="sdQaManagementViewCtrl as qaManagementCtrl" sg-stretch-to-bottom>
	<!-- Save Button -->
	<div class="view-panel-toolbar toolbar-buttons">
		<div class="view-toolbar-section" >
			<span sd-save sda-on-save="qaManagementCtrl.saveChanges();" aid="ADM-QAMgmt-SaveChanges"></span>
		</div>
	</div>
	<!-- Activities -->
	<div class="view-panel-toolbar">
		<i class="sc sc-arrow-d" ng-show="qaManagementCtrl.isActivitiesPanelExpanded" ng-click="qaManagementCtrl.expandActivitiesPanel(false);"> </i> 
		<i class="sc sc-arrow-r" ng-show="!qaManagementCtrl.isActivitiesPanelExpanded" ng-click="qaManagementCtrl.expandActivitiesPanel(true);"> </i> 
		<span ng-bind="i18n('admin-portal-messages.views-qaManagementView-activities-label')" class="heading"> 
		</span>
	</div>
	<!-- Activities Panel-->
	<div ng-show="qaManagementCtrl.isActivitiesPanelExpanded">
		<!-- ToolBar -->
		<div sda-toolbar>
			<div class="tbl-toolbar-section">
				<button ng-click="qaManagementCtrl.showHideObsoleteActivities();" aid="ADM-QAMgmt-ShowObsoleteActivities"
					title="{{i18n('admin-portal-messages.views-qaManagementView-toolbar-showHideAbsActivites-title')}}"
					class="button-link tbl-toolbar-item tbl-tool-link">
					<!-- 	Replace with pen book icon for show obsolete activities -->
					<i class="toolbar-icon sc sc-book-open sc-1x" ng-class="{iconDisabled:qaManagementCtrl.showObsoleteActivities }"></i>
				</button>
				<button ng-click="qaManagementCtrl.editActivityQa();" ng-disabled="qaManagementCtrl.activityTable.getSelection() < 1"
					title="{{i18n('admin-portal-messages.views-qaManagementView-toolbar-editQA-title')}}"  aid="ADM-QAMgmt-EditActivityQA"
					class="button-link tbl-toolbar-item tbl-tool-link">
					<i class="toolbar-icon glyphicon glyphicon-pencil sc-1x"></i>
				</button>
			</div>
		</div>
		<!-- Activities Table -->
		<div ng-if="qaManagementCtrl.activityTableReady">
			<table sd-data-table="qaManagementCtrl.activityTable" sd-data="qaManagementCtrl.fetchQaActivities(params)"
			      sda-mode="remote"  sda-sort-by="{name : 'modelName' , dir : 'asc'}" 
			      sda-selectable="row"  sda-sortable="true" sda-on-select="qaManagementCtrl.onSelect(info)" sda-page-size="{{qaManagementCtrl.activities.totalCount}}" >
				<thead>
					<tr>
						<th sda-name="modelName" sda-label="{{i18n('admin-portal-messages.views-qaManagementView-modelName-label')}}"
							sda-sortable="true" sda-filterable="true">
							<div sda-filter-template>
								<div sd-text-search-filter></div>
							</div>
						</th>
						<th sda-name="processName" sda-label="{{i18n('admin-portal-messages.common-process')}}" sda-sortable="true" 
						    sda-filterable="true">
							<div sda-filter-template>
								<div sd-text-search-filter></div>
							</div>
						</th>
						<th sda-name="activityName" sda-label="{{i18n('admin-portal-messages.common-activity')}}"
							sda-sortable="true" sda-filterable="true">
							<div sda-filter-template>
								<div sd-text-search-filter></div>
							</div>
						</th>
						<th sda-name="defaultPerformer" sda-label="{{i18n('admin-portal-messages.views-qaManagementView-defaultPerformer-label')}}"
							sda-sortable="true" sda-filterable="true">
							<div sda-filter-template>
								<div sd-text-search-filter></div>
							</div>
						</th>
						<th sda-name="qaPercentage" sda-label="{{i18n('admin-portal-messages.views-qaManagementView-qaPercentage-label')}}"
							sda-sortable="true" sda-filterable="false"></th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
							<i class=" qa-management-table-icon sc sc-1x sc-spiral"> </i>
							<span ng-bind="rowData.modelName"></span>
						</td>
						<td>
							<i class="glyphicon glyphicon-cog qa-management-table-icon sc-1x"> </i>
							<span ng-bind="rowData.processName"></span>
						</td>
						<td>
						<i class="sc sc-badge-portrait sc-1x sc-cog sc-left qa-management-table-icon"> 
							<i class="sc sc-badge-bg sc-badge-bg-circle sc-stroke"></i>
							<i class="sc sc-badge-icon sc-badge-icon-hand" style="color:white"></i>
						</i> 
						<span ng-bind="rowData.activityName"></span></td>
						<td>
							<!-- Icons for various Participant types -->
							<span ng-if="rowData.performerType == 'ROLE'"  class="qa-management-table-icon"> <span class="sc-1x" style="color:#A2B5CD">(</span> <i
								class="sc sc-1x sc-user" style="color:#A2B5CD"></i> <span class="sc-1x" style="color:#A2B5CD">)</span>
						   </span> 
						   <span ng-if="rowData.performerType == 'SCOPED_ROLE'"  class="qa-management-table-icon"> <span class="sc-1x"  style="color:'#000'">(</span> <i
								class="sc sc-1x sc-user" style="color:#A2B5CD"></i> <span class="sc-1x">)</span>
						   </span>
						    <span ng-if="rowData.performerType == 'SCOPED_ORGANIZATION'"  class="qa-management-table-icon"> 
						    	<i class="sc sc-organization sc-1x "></i>
						    </span>
						      <span ng-if="rowData.performerType == 'ORGANIZATION'"  class="qa-management-table-icon"> 
						    	<i class="sc sc-organization sc-1x "></i>
						    </span>
						     <span ng-if="rowData.performerType == 'USER'"  class="qa-management-table-icon"> 
						    	<i class="sc sc-user sc-1x "></i>
						    </span>
						     <span ng-if="rowData.performerType == 'USERGROUP'"  class="qa-management-table-icon"> 
						    	<i class="sc sc-users sc-1x "></i>
						    </span>
						 <span ng-bind="rowData.defaultPerformer"></span>
						</td>
						<td>
							<span ng-hide="rowData.isEditMode" ng-bind="rowData.qaPercentage"></span> 
							<span ng-show="rowData.isEditMode">
								<input type="text" ng-model="rowData.qaPercentage" style="width: 30px;" aid="ADM-QAMgmt-ActivityQA"/> 
								 <span ng-show=" !rowData.qaPercentage || rowData.qaPercentage === ''" 
								 class="qa-management-emptyCell-warning "> * </span>
							</span>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<br />
	<!-- Departments -->
	<div ng-if="qaManagementCtrl.departments.totalCount > 0">
		<div class="view-panel-toolbar">
			<i class="sc sc-arrow-d" ng-show="qaManagementCtrl.isDepartmentsPanelExpanded"ng-click="qaManagementCtrl.expandDepartmentsPanel(false);"> 
			</i> 
			<i class="sc sc-arrow-r" ng-show="!qaManagementCtrl.isDepartmentsPanelExpanded" ng-click="qaManagementCtrl.expandDepartmentsPanel(true);"> 
			</i> 
			<span ng-bind="i18n('admin-portal-messages.views-qaManagementView-departments-label')" class="heading"></span>
		</div>
		<div ng-show="qaManagementCtrl.isDepartmentsPanelExpanded">
			<div sda-toolbar>
				<div class="tbl-toolbar-section">
					<button ng-click="qaManagementCtrl.editDepartmentQa();" ng-disabled="qaManagementCtrl.departmentTable.getSelection() < 1"
						title="{{i18n('admin-portal-messages.views-qaManagementView-toolbar-editQA-title')}}" aid="ADM-QAMgmt-EditDepartmentQA"
						class="button-link tbl-toolbar-item tbl-tool-link">
						<i class="glyphicon glyphicon-pencil toolbar-icon sc-1x"></i>
					</button>
				</div>
			</div>
			<!-- Departments Table	 -->
			<table sd-data-table="qaManagementCtrl.departmentTable"  aid="ADM-QAMgmt-DepartmentQATable"
				   sd-data="qaManagementCtrl.fetchQaDepartments(params)" sda-sort-by="{name : 'name' , dir : 'asc'}" sda-page-size="{{qaManagementCtrl.departments.totalCount}}"
				   sda-mode="remote"  sda-selectable="row" sda-sortable="true">
				<thead>
					<tr>
						<th sda-name="name" sda-label="{{i18n('admin-portal-messages.views-qaManagementView-department-label')}}"
							sda-sortable="true" sda-filterable="true" >
							<div sda-filter-template>
								<div sd-text-search-filter></div>
							</div>
						</th>
						<th sda-name="qaPercentage" sda-label="{{i18n('admin-portal-messages.views-qaManagementView-qaPercentage-label')}}"
							sda-sortable="true" sda-filterable="false"></th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
							<i class="sc sc-badge-portrait  sc-1x sc-users sc-right  qa-management-table-icon">
								<i class="sc sc-badge-bg sc-badge-bg-circle "></i> <i
								class="sc sc-badge-icon sc-badge-icon-chain" style="color : white"></i>
							</i>
							<span ng-bind="rowData.name"></span>
						</td>
						<td>
							<span ng-hide="rowData.isEditMode" ng-bind="rowData.qaPercentage"></span> 
							<span ng-show="rowData.isEditMode">
								<input type="text" ng-model="rowData.qaPercentage" style="width: 30px;"  aid="ADM-QAMgmt-DepartmentQA"></input> 
								<span ng-show=" !rowData.qaPercentage || rowData.qaPercentage === ''" style="color: orange; font-size: 25px;"> * </span>
							</span>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>
