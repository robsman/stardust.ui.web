<div class="participant-management-wrapper">
	<div>
		<div class="view-panel-toolbar">
			<span style="color: #2F6871; font-weight: bold; font-size: 11px;">{{i18n('admin-portal-messages.views-common-users-label')}}</span>
		</div>
		<table>
			<tr>
				<td><label class="form-lable">{{i18n('admin-portal-messages.views-common-total-label')}}:</label></td>
				<td style="padding-bottom: 5px;">{{ctrl.allUsers.allCount}}</td>			
				<td style="padding-left: 5px;"><label class="form-lable">{{i18n('admin-portal-messages.views-common-valid-label')}}:</label></td>
				<td style="padding-bottom: 5px;">{{ctrl.allUsers.activeCount}}</td>
			</tr>
		</table>
	</div>
	<div class="view-panel-toolbar" ng-click="ctrl.setShowAllUsersTable()">
		<i ng-show="ctrl.showAllUsersTable" class="sc sc-arrow-d"> </i> <i
			ng-show="!ctrl.showAllUsersTable" class="sc sc-arrow-r"> </i> <span
			style="color: #2F6871; font-weight: bold; font-size: 11px;">{{i18n('admin-portal-messages.views-participantMgmt-table-title')}}
		</span>
	</div>
	<div ng-show="ctrl.showAllUsersTable">
		<div sda-toolbar>
			<div class="tbl-toolbar-section">
				<button
					ng-click="bpmCommon.stopEvent($event); ctrl.openCreateCopyModifyUser('CREATE_USER');"
					title="{{i18n('views-common-messages.common-create')}}"
					class="button-link tbl-toolbar-item tbl-tool-link">
					<i class="sc sc-fw sc-1x sc-users"></i>
				</button>
				<button
					ng-disabled="!(ctrl.rowSelectionForAllUsersTable.length == 1)"
					ng-click="bpmCommon.stopEvent($event); ctrl.openCreateCopyModifyUser('COPY_USER',ctrl.rowSelectionForAllUsersTable[0].oid);"
					title="{{i18n('admin-portal-messages.common-copy')}}"
					class="button-link tbl-toolbar-item tbl-tool-link">
					<i class="sc sc-fw sc-1x sc-users"></i>
				</button>
				<button
					ng-disabled="!(ctrl.rowSelectionForAllUsersTable.length > 0)"
					ng-click="bpmCommon.stopEvent($event); ctrl.invalidateUsers();"
					title="{{i18n('admin-portal-messages.views-participantMgmt-invalidateUser-title')}}"
					class="button-link tbl-toolbar-item tbl-tool-link">
					<i class="sc sc-fw sc-1x sc-minus-circle"></i>
				</button>
			</div>
			<div class="tbl-toolbar-section">
				<button ng-if="!ctrl.hideInvalidatedUsers"
					ng-click="bpmCommon.stopEvent($event); ctrl.changeHideInvalidatedUsersFlag();"
					title="{{i18n('admin-portal-messages.views-participantMgmt-filters-invalidatedUsers-hideUser')}}"
					class="button-link tbl-toolbar-item tbl-tool-link">
					<i class="sc sc-fw sc-1x sc-ban" style="color: Red"></i>
				</button>

				<button ng-if="ctrl.hideInvalidatedUsers"
					ng-click="bpmCommon.stopEvent($event); ctrl.changeHideInvalidatedUsersFlag();"
					title="{{i18n('admin-portal-messages.views-participantMgmt-filters-invalidatedUsers-showUser')}}"
					class="button-link tbl-toolbar-item tbl-tool-link">
					<i class="sc sc-fw sc-1x sc-ban"></i>
				</button>
			</div>
		</div>
		<table sd-data-table="ctrl.allUsersTable"
			sd-data="ctrl.getAllUsers(params)" sda-mode="remote"
			sda-selectable="multiple"
			sda-selection="ctrl.rowSelectionForAllUsersTable"
			sda-column-selector="{{ctrl.columnSelector}}" sda-sortable="true"
			sda-sort-by="{name : 'oid', dir : 'desc'}" sda-exports="true"
			sda-exports-file-name="{{ctrl.exportFileNameForAllUsers}}">
			<thead
				sda-i18n-scope="admin-portal-messages.views-participantMgmt-column">
				<tr>
					<th sda-name="displayName" sda-label-key="name">
						<div sda-filter-template>
							<div sd-name-filter></div>
						</div>
					</th>
					<th sda-name="oid" sda-sortable="true"></th>
					<th sda-name="account" sda-sortable="true">
						<div sda-filter-template>
							<div sd-text-search-filter></div>
						</div>
					</th>
					<th sda-name="realmId" sda-label-key="realm">
						<div sda-filter-template>
							<div sd-text-search-filter></div>
						</div>
					</th>
					<th sda-name="validFrom">
						<div sda-filter-template>
							<div sd-date-filter></div>
						</div>
					</th>
					<th sda-name="validTo">
						<div sda-filter-template>
							<div sd-date-filter></div>
						</div>
					</th>
					<th sda-name="eMail" sda-label-key="email"></th>
			</thead>
			<tbody>
				<tr>
					<td sda-exporter="rowData.displayName"><a href="#"
						ng-click="bpmCommon.stopEvent($event); ctrl.openCreateCopyModifyUser('MODIFY_USER',rowData.oid);"
						title="{{i18n('admin-portal-messages.views-userTable-columnLink-title')}}"
						class="tbl-tool-link">{{rowData.displayName}}</a></td>
					<td style="text-align: center;"></td>
					<td style="text-align: center;"></td>
					<td style="text-align: center;"></td>
					<td sda-data-type="dateTime" style="text-align: center;"></td>
					<td sda-data-type="dateTime" style="text-align: center;"></td>
					<td style="text-align: center;"></td>
				</tr>
			</tbody>
		</table>
	</div>
</div>
