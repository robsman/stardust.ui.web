<div class="participant-management-wrapper">
	<div>
		<table>
			<tr>
				<td><span class="label-item" style="font-weight:bold"
					ng-bind="i18n('admin-portal-messages.views-common-total-label') + i18n('admin-portal-messages.common-colon')"></span></td>
				<td><span class="overview-report-field-value"
					ng-bind="ctrl.allCount" aid="ADM-PartMgmt-TotalUserCnt"></span></td>
				<td><span class="label-item" style="font-weight:bold"
					ng-bind="i18n('admin-portal-messages.views-common-valid-label') + i18n('admin-portal-messages.common-colon')"></span></td>
				<td><span class="overview-report-field-value"
					ng-bind="ctrl.activeCount" aid="ADM-PartMgmt-ValidUserCnt"></span></td>
			</tr>
		</table>
	</div>
	<div class="view-panel-content">
		<div class="view-panel-toolbar heading"
			ng-click="ctrl.setShowAllUsersTable()">
			<i ng-show="ctrl.showAllUsersTable" class="sc sc-arrow-d"> </i> <i
				ng-show="!ctrl.showAllUsersTable" class="sc sc-arrow-r"> </i>{{i18n('admin-portal-messages.views-participantMgmt-table-title')}}
		</div>
		<div ng-show="ctrl.showAllUsersTable">
			<div sda-toolbar>
				<div class="tbl-toolbar-section">
					<button
						ng-click="bpmCommon.stopEvent($event); ctrl.openCreateCopyModifyUser('CREATE_USER');"
						title="{{i18n('views-common-messages.common-create')}}"
						class="button-link tbl-toolbar-item tbl-tool-link"
						aid="ADM-PartMgmt-ToolbarCreateUser">
						<i class="sc sc-fw sc-1x sc-users"></i>
					</button>
					<button
						ng-disabled="!(ctrl.rowSelectionForAllUsersTable.length == 1)"
						ng-click="bpmCommon.stopEvent($event); ctrl.openCreateCopyModifyUser('COPY_USER',ctrl.rowSelectionForAllUsersTable[0].oid);"
						title="{{i18n('admin-portal-messages.common-copy')}}"
						class="button-link tbl-toolbar-item tbl-tool-link"
						aid="ADM-PartMgmt-ToolbarCopyUser">
						<i class="sc sc-fw sc-1x sc-users"></i>
					</button>
					<button
						ng-disabled="!(ctrl.rowSelectionForAllUsersTable.length > 0)"
						ng-click="bpmCommon.stopEvent($event); ctrl.invalidateUsers();"
						title="{{i18n('admin-portal-messages.views-participantMgmt-invalidateUser-title')}}"
						class="button-link tbl-toolbar-item tbl-tool-link"
						aid="ADM-PartMgmt-ToolbarInvalidateUser">
						<i class="sc sc-fw sc-1x sc-minus-circle"></i>
					</button>
				</div>
				<div class="tbl-toolbar-section">
					<button ng-if="!ctrl.hideInvalidatedUsers"
						ng-click="bpmCommon.stopEvent($event); ctrl.changeHideInvalidatedUsersFlag();"
						title="{{i18n('admin-portal-messages.views-participantMgmt-filters-invalidatedUsers-hideUser')}}"
						class="button-link tbl-toolbar-item tbl-tool-link"
						aid="ADM-PartMgmt-Filters-InvalidatedUsers-HideUser">
						<i class="sc sc-fw sc-1x sc-ban" style="color: Red"></i>
					</button>

					<button ng-if="ctrl.hideInvalidatedUsers"
						ng-click="bpmCommon.stopEvent($event); ctrl.changeHideInvalidatedUsersFlag();"
						title="{{i18n('admin-portal-messages.views-participantMgmt-filters-invalidatedUsers-showUser')}}"
						class="button-link tbl-toolbar-item tbl-tool-link"
						aid="ADM-PartMgmt-Filters-InvalidatedUsers-ShowUser">
						<i class="sc sc-fw sc-1x sc-ban"></i>
					</button>
				</div>
				<span sd-refresh sda-on-refresh="ctrl.refresh();" aid="PP-PartMgmt"></span>
			</div>
			<table sd-data-table="ctrl.allUsersTable"
				sd-data="ctrl.getAllUsers(params)" sda-mode="remote"
				sda-selectable="multiple"
				sda-selection="ctrl.rowSelectionForAllUsersTable"
				sda-preference-delegate="ctrl.preferenceDelegate(prefInfo)"
				sda-column-selector="{{ctrl.columnSelector}}" sda-sortable="true"
				sda-sort-by="{name : 'oid', dir : 'desc'}" sda-exports="true"
				sda-exports-file-name="{{ctrl.exportFileNameForAllUsers}}">
				<thead
					sda-i18n-scope="admin-portal-messages.views-participantMgmt-column">
					<tr>
						<th sda-name="name">
							<div sda-filter-template>
								<div sd-name-filter></div>
							</div>
						</th>
						<th sda-name="oid" sda-sortable="true"></th>
						<th sda-name="account" sda-sortable="true">
							<div sda-filter-template>
								<div sd-text-search-filter></div>
							</div>
						</th>
						<th sda-name="realm">
							<div sda-filter-template>
								<div sd-text-search-filter></div>
							</div>
						</th>
						<th sda-name="validFrom">
							<div sda-filter-template>
								<div sd-date-filter></div>
							</div>
						</th>
						<th sda-name="validTo">
							<div sda-filter-template>
								<div sd-date-filter></div>
							</div>
						</th>
						<th sda-name="eMail" sda-label-key="email"></th>
				</thead>
				<tbody>
					<tr>
						<td sda-exporter="rowData.displayName"><a href="#"
							ng-click="ctrl.openCreateCopyModifyUser('MODIFY_USER',rowData.oid);"
							title="{{i18n('admin-portal-messages.views-userTable-columnLink-title')}}"
							class="tbl-tool-link"
							sd-data-drag ng-model="rowData" sda-dragstart="ctrl.userDragStart($data, $event)"
							aid="ADM-PartMgmt-DataTable-DisplayName">{{rowData.displayName}}</a></td>
						<td sda-data-type="int"></td>
						<td style="text-align: center;"></td>
						<td style="text-align: center;" sda-exporter="rowData.realmId">{{rowData.realmId}}</td>
						<td sda-data-type="dateTime"></td>
						<td sda-data-type="dateTime"></td>
						<td style="text-align: center;"></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>
