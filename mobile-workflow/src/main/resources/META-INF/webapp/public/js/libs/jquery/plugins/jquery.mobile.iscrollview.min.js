function jqmIscrollviewRemoveLayerXYProps(e){delete e.layerX;delete e.layerY}(function(e,t,n,r){"use strict";function m(e){e.preventDefault()}function g(e,t){function n(){}n.prototype=t.prototype;var r=new n;r.constructor=e;e.prototype=r}function y(t,n,r){this.iscrollview=t;this._emulateBottomOffset=function(e){if(this.iscrollview.options.emulateBottomOffset){this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY+this.iscrollview.options.bottomOffset}};this._fixInput=function(e){if(this.iscrollview.options.fixInput){var t,n=e.target;while(n.nodeType!==1){n=n.parentNode}t=n.tagName.toLowerCase();if(t==="select"||t==="input"||t==="textarea"){return}}if(this.iscrollview.options.preventTouchHover){e.stopImmediatePropagation()}else{e.preventDefault()}};this._doCallback=function(e,t,n){if(typeof t==="object"){jqmIscrollviewRemoveLayerXYProps(t)}var r=this.iscrollview,i=r._logCallback(e,t);if(n){n.call(this,t)}r._trigger(e.toLowerCase(),t,{iscrollview:r});r._logCallback(e,t,i)};this._bind=function(t,n,r){var i=this.iscrollview.options.bindIscrollUsingJqueryEvents,s=i&&t==="mouseout"?"mouseleave":t;if(t==="orientationchange"||t==="resize"){this.iscrollview._logIscrollEvent("iScroll bind (ignored)",t);return}this.iscrollview._logIscrollEvent("iScroll bind",t);if(i){(n?e(n):this.iscrollview.$scroller).bind(s,e.proxy(this.handleEvent,this))}else{(n||this.scroller).addEventListener(s,this,!!r)}};this._unbind=function(t,n,r){var i=this.iscrollview.options.bindIscrollUsingJqueryEvents,s=i&&t==="mouseout"?"mouseleave":t;if(t==="orientationchange"||t==="resize"){this.iscrollview._logIscrollEvent("iScroll unbind (ignored)");return}this.iscrollview._logIscrollEvent("iScroll unbind",t);if(i){e(n||this.iscrollview.$scroller).unbind(s,this.handleEvent)}else{(n||this.scroller).removeEventListener(s,this,!!r)}};this._origHandleEvent=iScroll.prototype.handleEvent;this.handleEvent=function(e){var t=this.iscrollview.options.bindIscrollUsingJqueryEvents,n;n=this.iscrollview._logIscrollEvent("iScroll.handleEvent",e);if(t&&e.type==="mouseleave"){e.type="mouseout";this._origHandleEvent(e);e.type="mouseleave"}else{this._origHandleEvent(e)}this.iscrollview._logIscrollEvent("iScroll.handleEvent",e,n)};this._resize=function(){};iScroll.call(this,n,r)}var i=n.ontouchend!==r,s=/webkit/i.test(navigator.appVersion),o=/android/gi.test(navigator.appVersion),u=/firefox/i.test(navigator.userAgent),a=/hp-tablet/gi.test(navigator.appVersion),f=/(iPhone|iPad|iPod).*AppleWebKit/.test(navigator.appVersion),l=/iPad.*AppleWebKit/.test(navigator.appVersion),c=/(iPhone|iPad|iPod).*AppleWebKit.*Safari/.test(navigator.appVersion),h=/(iPhone|iPad|iPod).*AppleWebKit.(?!.*Safari)/.test(navigator.appVersion),p=f&&t.navigator.Standalone!==r,d=e.mobile.ignoreContentEnabled===r,v=1;g(y,iScroll);e.widget("mobile.iscrollview",e.mobile.widget,{widgetEventPrefix:"iscroll_",iscroll:null,$window:e(t),$wrapper:[],$scroller:[],$scrollerContent:[],$pullDown:[],$pullUp:[],$pullUpSpacer:[],$page:[],_wrapperHeightAdjustForBoxModel:0,_firstScrollerExpand:true,createdAt:null,pageID:null,instanceID:null,_dirty:false,_dirtyCallbackBefore:null,_dirtyCallbackAfter:null,_sizeDirty:false,options:{hScroll:false,hScrollbar:false,debug:false,traceResizeWrapper:false,traceRefresh:false,traceCreateDestroy:false,traceIscrollEvents:false,tracedIscrollEvents:[],traceWidgetEvents:false,tracedWidgetEvents:[],traceIscrollCallbacks:false,tracedIscrollCallbacks:[],traceWidgetCallbacks:false,tracedWidgetCallbacks:[],bottomOffset:0,emulateBottomOffset:true,pageClass:"iscroll-page",wrapperClass:"iscroll-wrapper",scrollerClass:"iscroll-scroller",pullDownClass:"iscroll-pulldown",pullUpClass:"iscroll-pullup",pullLabelClass:"iscroll-pull-label",pullUpSpacerClass:"iscroll-pullup-spacer",topSpacerClass:"iscroll-top-spacer",bottomSpacerClass:"iscroll-bottom-spacer",scrollerContentClass:"iscroll-content",fixedHeightClass:"iscroll-fixed",fixedHeightSelector:":jqmData(role='header'), :jqmData(role='footer'), :jqmData(iscroll-fixed)",resizeWrapper:true,resizeEvents:"resize"+(e.support.orientation?" orientationchange":""),refreshOnPageBeforeShow:false,fixInput:true,wrapperAdd:0,refreshDelay:o?200:0,scrollShortContent:true,removeWrapperPadding:true,addScrollerPadding:true,addSpacers:true,scrollTopOnResize:true,scrollTopOnOrientationChange:true,createScroller:true,deferNonActiveRefresh:true,deferNonActiveResize:true,preventTouchHover:d&&i,bindIscrollUsingJqueryEvents:false,fastDestroy:false,preventPageScroll:true,pullDownResetText:"Pull down to refresh...",pullDownPulledText:"Release to refresh...",pullDownLoadingText:"Loading...",pullUpResetText:"Pull up to refresh...",pullUpPulledText:"Release to refresh...",pullUpLoadingText:"Loading...",pullPulledClass:"iscroll-pull-pulled",pullLoadingClass:"iscroll-pull-loading",onrefresh:null,onbeforescrollstart:null,onscrollstart:null,onbeforescrollmove:null,onscrollmove:null,onbeforescrollend:null,onscrollend:null,ontouchend:null,ondestroy:null,onzoomstart:null,onzoom:null,onzoomend:null,onpulldownreset:null,onpulldownpulled:null,onpulldown:null,onpullupreset:null,onpulluppulled:null,onpullup:null,onbeforerefresh:null,onafterrefresh:null},_widgetOnlyOptions:["debug","traceIscrollEvents","tracedIscrollEvents","traceIscrollCallbacks","tracedIscrollCallbacks","traceWidgetEvents","tracedWidgetEvents","traceWidgetCallbacks","tracedWidgetCallbacks","traceResizeWrapper","traceRefresh","traceCreateDestroy","bottomOffset","emulateBottomOffset","pageClass","wrapperClass","scrollerClass","pullDownClass","pullUpClass","scrollerContentClass","pullLabelClass","pullUpSpacerClass","topSpacerClass","bottomSpacerClass","addSpacer","fixedHeightSelector","resizeWrapper","resizeEvents","refreshOnPageBeforeShow","fixInput","wrapperAdd","refreshDelay","scrollShortContent","removeWrapperPadding","addScrollerPadding","createScroller","deferNonActiveRefresh","preventTouchHover","deferNonActiveResize","bindIscrollUsingJqueryEvents","scrollTopOnResize","scrollTopOnOrientationChange","pullDownResetText","pullDownPulledText","pullDownLoadingText","pullUpResetText","pullUpPulledText","pullUpLoadingText","pullPulledClass","pullLoadingClass","onpulldownreset","onpulldownpulled","onpulldown","onpullupreset","onpulluppulled","onpullup","onbeforerefresh","onafterrefresh","fastDestroy","preventPageScroll"],_event_map:{onrefresh:"onRefresh",onbeforescrollstart:"onBeforeScrollStart",onscrollstart:"onScrollStart",onbeforescrollmove:"onBeforeScrollMove",onscrollmove:"onScrollMove",onbeforescrollend:"onBeforeScrollEnd",onscrollend:"onScrollEnd",ontouchend:"onTouchEnd",ondestroy:"onDetroy",onzoomstart:"onZoomStart",onzoom:"onZoom",onzoomend:"onZoomEnd"},_proxy_event_funcs:{onRefresh:function(e){this._doCallback("onRefresh",e,function(e){this._emulateBottomOffset();this.iscrollview._pullOnRefresh.call(this.iscrollview,e)})},onBeforeScrollStart:function(e){this._doCallback("onBeforeScrollStart",e,function(e){this._fixInput(e)})},onScrollStart:function(e){this._doCallback("onScrollStart",e)},onBeforeScrollMove:function(e){this._doCallback("onBeforeScrollMove",e);e.preventDefault()},onScrollMove:function(e){this._doCallback("onScrollMove",e,function(e){this.iscrollview._pullOnScrollMove.call(this.iscrollview,e)})},onBeforeScrollEnd:function(e){this._doCallback("onBeforeScrollEnd",e)},onScrollEnd:function(e){this._doCallback("onScrollEnd",e,function(e){this.iscrollview._pullOnScrollEnd.call(this.iscrollview,e)})},onTouchEnd:function(e){this._doCallback("onTouchEnd",e)},onDestroy:function(e){this._doCallback("onDestroy",e)},onZoomStart:function(e){this._doCallback("onZoomStart",e)},onZoom:function(e){this._doCallback("onZoom",e)},onZoomEnd:function(e){this._doCallback("onZoomEnd",e)}},_merge_from_iscroll_options:function(){var t=e.extend(true,{},this.iscroll.options);e.each(this._proxy_event_funcs,function(e,n){delete t[e]});if(this.options.emulateBottomOffset){delete t.bottomOffset}e.extend(this.options,t)},_create_iscroll_options:function(){var t=e.extend(true,{},this.options);e.each(this._widgetOnlyOptions,function(e,n){delete t[n]});e.each(this._event_map,function(e,n){delete t[e]});if(this.options.emulateBottomOffset){delete t.bottomOffset}return e.extend(t,this._proxy_event_funcs)},_pad:function(e,t,n){var r=e.toString(),i=n||"0";while(r.length<t){r=i+r}return r},_toTime:function(e){return this._pad(e.getHours(),2)+":"+this._pad(e.getMinutes(),2)+":"+this._pad(e.getSeconds(),2)+"."+this._pad(e.getMilliseconds(),3)},_log:function(t,n){var r,i,s;if(!this.options.debug){return null}r=n||new Date;i=this.$wrapper.attr("id");s=i?"#"+i:"";console.log(this._toTime(r)+" "+e.mobile.path.parseUrl(this.$page.jqmData("url")).filename+s+" "+t);return r},_logInterval:function(e,t){var n;if(!this.options.debug){return null}n=new Date;return this._log(e+" "+(n-t)+"mS from "+this._toTime(t),n)},_logEvent:function(e,t,n){var r,i,s=t&&t instanceof Object,o=s?t.type:t,u=o+" "+e;if(!this.options.debug){return null}r=new Date;if(n){u+=" end "+ +(r-n)+"mS from "+this._toTime(n)}else if(s){u+=" begin"}if(s){i=new Date(t.timeStamp);u+=" ("+(r-i)+"mS from "+t.type+" @ "+this._toTime(i)+")"}return this._log(u,r)},_logCallback:function(t,n,r){if(!this.options.debug||!this.options.traceIscrollCallbacks||this.options.tracedIscrollCallbacks.length!==0&&e.inArray(t,this.options.tracedIscrollCallbacks)===-1){return null}if(n){return this._logEvent(t,n,r)}if(r){return this._logInterval(t+" end",r)}return this._log(t+" begin")},_logIscrollEvent:function(t,n,r){var i=n instanceof Event,s=i?n.type:n;if(!this.options.debug||!this.options.traceIscrollEvents||this.options.tracedIscrollEvents.length!==0&&e.inArray(s,this.options.tracedIscrollEvents)===-1){return null}return this._logEvent(t,n,r)},_logWidgetEvent:function(t,n,r){var i=n instanceof Object,s=i?n.type:n;if(!this.options.debug||!this.options.traceWidgetEvents||this.options.tracedWidgetEvents.length!==0&&e.inArray(s,this.options.tracedWidgetEvents)===-1){return null}return this._logEvent(t,n,r)},_logWidgetCallback:function(t,n,r){if(!this.options.debug||!this.options.traceWidgetCallbacks||this.options.tracedWidgetCallbacks.length!==0&&e.inArray(t,this.options.tracedWidgetCallbacks)===-1){return null}if(n){return this._logEvent(t,n,r)}if(r){return this._logInterval(t+" end",r)}return this._log(t+" begin")},_logInterval2:function(e,t,n){var r;if(!this.options.debug){return}r=new Date;this._log(e+" "+(r-n)+"mS from "+this._toTime(n)+" ("+(r-t)+"mS from "+this._toTime(t)+")")},_startTiming:function(){if(!this.options.debug){return null}return new Date},_pageEventNamespace:function(){return".iscroll_"+this.pageID},_instanceEventNamespace:function(){return this._pageEventNamespace()+"_"+this.instanceID},_addEventsNamespace:function(t,n){var r=t.split(" ");e.each(r,function(e,t){r[e]+=n});return r.join(" ")},_isvBind:function(t,n,r,i){var s=this._addEventsNamespace(n,this._instanceEventNamespace());this._logWidgetEvent("bind "+i,s);t.bind(s,e.proxy(r,this))},_bindPage:function(t,n){var r=this._addEventsNamespace(t,this._pageEventNamespace());this._logWidgetEvent("bind $page",r);this.$page.bind(r,e.proxy(n,this))},_isvUnbind:function(e,t,n){var r=this._addEventsNamespace(t,this._instanceEventNamespace());this._logWidgetEvent("unbind "+n,r);e.unbind(r)},_unbindPage:function(e){var t=this._addEventsNamespace(e,this._pageEventNamespace());this._logWidgetEvent("unbind  $page",t);this.$page.unbind(t)},_delegate:function(t,n,r,i,s){this._logWidgetEvent("delegate "+s+" "+n,r);t.delegate(n,r,e.proxy(i,this))},_triggerWidget:function(e,t){var n=this._logWidgetCallback(e);this._trigger(e,t,{iscrollview:this});this._logWidgetCallback(e,t,n)},isDirty:function(){return this._dirty},_restoreStyle:function(e,t){if(t===r){return}if(t===null){e.removeAttr("style")}else{e.attr("style",t)}},_pageBeforeShowFunc:function(t){var n=this._logWidgetEvent("_pageBeforeShowFunc",t);if(this._dirty){this.resizeWrapper(true);this.refresh(null,this._dirtyCallbackBefore,this._dirtyCallbackAfter,true);this._dirty=false;this._dirtyCallbackBefore=null;this._dirtyCallbackAfter=null}else if(this.options.refreshOnPageBeforeShow||this._sizeDirty){this.refresh(null,e.proxy(this._resizeWrapper,this),null,true)}this._sizeDirty=false;this._logWidgetEvent("_pageBeforeShowFunc",t,n)},_windowResizeFunc:function(t){var n=this._logWidgetEvent("_windowResizeFunc",t);if(this.options.deferNonActiveResize&&!this.$page.is(e.mobile.activePage)){this._sizeDirty=true;if(this.options.traceResizeWrapper){this._log("resizeWrapper() (deferred)")}}else{this.resizeWrapper(true);this.refresh(null,null,null,true)}this._logWidgetEvent("_windowResizeFunc",t,n)},_orientationChangeFunc:function(t){var n=this._logWidgetEvent("_orientationChangeFunc",t);if(this.options.scrollTopOnOrientationChange){e.mobile.silentScroll(0)}this._logWidgetEvent("_orientationChangeFunc",t,n)},_updateLayoutFunc:function(e){this.refresh()},_instanceCount:function(e){var t="iscroll-private",n=0,i=this.$page.jqmData(t)||{};if(e!==r){n=e;i.instanceCount=n;this.$page.jqmData(t,i)}else{if(i.instanceCount!==r){n=i.instanceCount}}return n},_nextInstanceID:function(e){var t="iscroll-private",n=1,i=this.$page.jqmData(t)||{};if(e!==r){n=e;i.nextInstanceID=n;this.$page.jqmData(t,i)}else{if(i.nextInstanceID!==r){n=i.nextInstanceID}}return n},_pageID:function(e){var t="iscroll-private",n=1,i=this.$page.jqmData(t)||{};if(e!==r){n=e;i.pageID=n;this.$page.jqmData(t,i)}else{if(i.pageID!==r){n=i.pageID}}return n},_adaptPage:function(){var t=this;if(this._instanceCount()===1){this.$page.addClass(this.options.pageClass);this.$page.find(this.options.fixedHeightSelector).each(function(){var n=e(this),r=n.closest(".ui-popup").length!==0,i=n.closest(".ui-panel").length!==0;if(!r&&!i){n.addClass(t.options.fixedHeightClass)}});if(i&&this.options.preventPageScroll){this._bindPage("touchmove",m)}}},_undoAdaptPage:function(){var t=this;if(this._instanceCount()===1){this.$page.find(this.options.fixedHeightSelector).each(function(){e(this).removeClass(t.options.fixedHeightClass)});this.$page.removeClass(this.options.pageClass)}},_calculateBarsHeight:function(){var t=0,n="."+this.options.fixedHeightClass,r=this.$page.find(n),i=e(".ui-mobile-viewport").children(n);r.each(function(){t+=e(this).outerHeight(true)});i.each(function(){var n=e(this).jqmData("id");if(n===""||!r.is(":jqmData(id='"+n+"')")){t+=e(this).outerHeight(true)}});return t},_getBoxSizing:function(t){var n,r="";if(u){r="-moz-"}else if(s){r="-webkit-"}n=t.css(r+"box-sizing");if(!n&&r){n=t.css("box-sizing")}if(!n){if(e.boxModel){n="content-box"}else{n="border-box"}}return n},_getHeightAdjustForBoxModel:function(e){var t;switch(this._getBoxSizing(e)){case"border-box":t=e.outerHeight(true)-e.outerHeight();break;case"padding-box":t=e.outerHeight()-e.height();break;case"content-box":default:t=e.outerHeight(e!==this.$wrapper)-e.height();break}return t},_setTopOffsetForPullDown:function(){if(this.$pullDown.length&&!this.options.topOffset){this.options.topOffset=this.$pullDown.outerHeight(true)}},_setBottomOffsetForPullUp:function(){if(this.$pullUp.length&&!this.options.bottomOffset){this.options.bottomOffset=this.$pullUp.outerHeight(true)}},_removeWrapperPadding:function(){var e=this.$wrapper;if(this.options.removeWrapperPadding){this._origWrapperPaddingLeft=e.css("padding-left");this._origWrapperPaddingRight=e.css("padding-right");this._origWrapperPaddingTop=e.css("padding-top");this._origWrapperPaddingBottom=e.css("padding-bottom");this.$wrapper.css("padding",0)}},_modifyWrapperCSS:function(){this._origWrapperStyle=this.$wrapper.attr("style")||null;this._removeWrapperPadding()},_undoModifyWrapperCSS:function(){this._restoreStyle(this.$wrapper,this._origWrapperStyle)},_addScrollerPadding:function(){if(this.options.removeWrapperPadding&&this.options.addScrollerPadding){var e,t=this.$scroller.children(),n=t.not(this.$pullDown).not(this.$pullUp).not(this.$pullUpSpacer);n.wrapAll("<div/>");e=n.parent().addClass(this.options.scrollerContentClass);e.css({"padding-left":this._origWrapperPaddingLeft,"padding-right":this._origWrapperPaddingRight,"padding-top":this._origWrapperPaddingTop,"padding-bottom":this._origWrapperPaddingBottom})}},_undoAddScrollerPadding:function(){if(this.options.removeWrapperPadding&&this.options.addScrollerPadding){e("."+this.options.scrollerContentClass,this.$scroller).children().unwrap()}},_addWrapperClasses:function(){this.$wrapper.addClass(this.options.wrapperClass);this.$scroller.addClass(this.options.scrollerClass)},_undoAddWrapperClasses:function(){this.$scroller.removeClass(this.options.scrollerClass);this.$wrapper.removeClass(this.options.wrapperClass)},_expandScrollerToFillWrapper:function(){if(this.options.scrollShortContent||this.$pullDown.length||this.$pullUp.length){if(this._firstScrollerExpand){this._origScrollerStyle=this.$scroller.attr("style")||null;this._firstScrollerExpand=false}this.$scroller.css("min-height",this.$wrapper.height()+(this.$pullDown.length?this.$pullDown.outerHeight(true):0)+(this.$pullUp.length?this.$pullUp.outerHeight(true):0))}},_undoExpandScrollerToFillWrapper:function(){this._restoreStyle(this.$scroller,this._origScrollerStyle)},_resizeWrapper:function(e){var t=null,r,i,s;if(!e&&!this.options.resizeWrapper){return}if(this.options.traceResizeWrapper){t=this._log("resizeWrapper() start")}this.$wrapper.trigger("updatelayout");r=n.documentElement.clientHeight;i=this._calculateBarsHeight();s=r-i-this._wrapperHeightAdjustForBoxModel+(c&&!l?60:0)+this.options.wrapperAdd;this.$wrapper.css("height",s);this._expandScrollerToFillWrapper();if(this.options.traceResizeWrapper){this._logInterval("resizeWrapper() end"+(this._sizeDirty?" (dirty)":""),t)}},resizeWrapper:function(e){var t=this._setPageVisible();this._resizeWrapper(e!==r);this._restorePageVisibility(t)},_undoResizeWrapper:function(){},_modifyWrapper:function(){this._addWrapperClasses();this._modifyWrapperCSS();this._wrapperHeightAdjustForBoxModel=this._getHeightAdjustForBoxModel(this.$wrapper)},_undoModifyWrapper:function(){this._undoResizeWrapper();this._undoModifyWrapperCSS();this._undoAddWrapperClasses()},_modifyPullDown:function(){var t,n,r;if(this.$pullDown.length===0){return}t=e("."+this.options.pullLabelClass,this.$pullDown);if(t.length){this._origPullDownLabelText=t.text();if(this._origPullDownLabelText){this.options.pullDownResetText=this._origPullDownLabelText}else{t.text(this.options.pullDownResetText)}n=t.jqmData("iscroll-pulled-text");if(n){this.options.pullDownPulledText=n}r=t.jqmData("iscroll-loading-text");if(r){this.options.pullDownLoadingText=r}}},_undoModifyPullDown:function(){if(this.$pullDown.length===0){return}var t=e("."+this.options.pullLabelClass,this.$pullDown);if(t.length===0){return}t.text(this._origPullDownLabelText)},_modifyPullUp:function(){var t,n,r;if(this.$pullUp.length===0){return}e("<div></div>").insertBefore(this.$pullUp).css("height",this.$pullUp.outerHeight(true));this.$pullUpSpacer=this.$pullUp.prev();this.$pullUpSpacer.addClass(this.options.pullUpSpacerClass);t=e("."+this.options.pullLabelClass,this.$pullUp);if(t.length){this._origPullUpLabelText=t.text();if(this._origPullUpLabelText){this.options.pullUpResetText=this._origPullUpLabelText}else{t.text(this.options.pullUpResetText)}n=t.jqmData("iscroll-pulled-text");if(n){this.options.pullUpPulledText=n}r=t.jqmData("iscroll-loading-text");if(r){this.options.pullUpLoadingText=r}}},_undoModifyPullUp:function(){if(this.$pullUp.length===0){return}this.$pullUp.prev().remove();if(this._origPullUpLabelText){e("."+this.options.pullLabelClass,this.$pullUp).text(this._origPullUpLabelText)}},_correctPushedDownPage:function(){if(this.options.resizeWrapper&&this.options.scrollTopOnResize){e.mobile.silentScroll(0)}},refresh:function(t,n,i,s){var o,u,a,f,l,c;if(!s&&this.options.deferNonActiveRefresh&&!this.$page.is(e.mobile.activePage)){this._dirty=true;this._dirtyCallbackBefore=n;this._dirtyCallbackAfter=i;if(this.options.traceRefresh){this._log("refresh() (deferred)")}return}o=this;u=t;a=n;f=i;l=s;c=this._startTiming();if(u===r||u===null){u=this.options.refreshDelay}setTimeout(function(){var e=null,t;if(o.options.traceRefresh){e=o._logInterval("refresh() start",c)}t=o._setPageVisible();if(a){a()}o._triggerWidget("onbeforerefresh");if(o.iscroll){o.iscroll.refresh()}o._triggerWidget("onafterrefresh");if(f){f()}o._restorePageVisibility(t);if(!t){o._correctPushedDownPage()}if(o.options.traceRefresh){o._logInterval2("refresh() end"+(l?" (dirty)":""),c,e)}},u);if(this.options.traceRefresh){this._log("refresh() will occur after >= "+u+"mS")}},_create_iscroll_object:function(){this.iscroll=new y(this,this.$wrapper.get(0),this._create_iscroll_options())},_createScroller:function(){if(this.options.createScroller){if(this.$wrapper.children().length){this.$wrapper.children().wrapAll("<div/>")}else{this.$wrapper.append("<div><div></div></div>")}}},_undoCreateScroller:function(){if(this.options.createScroller){this.$scroller.children().unwrap()}},_addSpacers:function(){if(this.options.addSpacers){this.$scrollerContent.before(e('<div class="'+this.options.topSpacerClass+'"></div>'));this.$scrollerContent.after(e('<div class="'+this.options.bottomSpacerClass+'"></div>'))}},_undoAddSpacers:function(){this.$wrapper.find(this.options.topSpacerClass).remove();this.$wrapper.find(this.options.bottomSpacerClass).remove()},_setPageVisible:function(){var e=this.$page.is(":hidden");if(e){this.$page.css("display","block")}return e},_restorePageVisibility:function(e){if(e){this.$page.css("display","")}},_create:function(){var t=new Date,n;this.$wrapper=this.element;this.$page=this.$wrapper.parents(":jqmData(role='page')");e.extend(true,this.options,this.$wrapper.jqmData("iscroll"));if(this.options.debug&&this.options.traceCreateDestroy){this._log("_create() start",t)}this.createdAt=t;this._instanceCount(this._instanceCount()+1);this.instanceID=this._nextInstanceID();this._nextInstanceID(this.instanceID+1);if(this.instanceID===1){this._pageID(v);v+=1}this.pageID=this._pageID();n=this._setPageVisible();this._adaptPage();this._createScroller();this.$scroller=this.$wrapper.children(":first");if(this.$scroller.length===0){return}this.$pullDown=e("."+this.options.pullDownClass,this.$scroller);this._modifyPullDown();this.$pullUp=e("."+this.options.pullUpClass,this.$scroller);this._modifyPullUp();this._modifyWrapper();this._bindPage("pagebeforeshow",this._pageBeforeShowFunc);this._setTopOffsetForPullDown();this._setBottomOffsetForPullUp();this._resizeWrapper();this._addScrollerPadding();this.$scrollerContent=this.$scroller.find("."+this.options.scrollerContentClass);this._addSpacers();this._create_iscroll_object();this._merge_from_iscroll_options();this._restorePageVisibility(n);if(this.options.resizeWrapper){if(this.options.resizeEvents.length){this._isvBind(this.$window,this.options.resizeEvents,this._windowResizeFunc,"$window")}if(this.options.scrollTopOnOrientationChange){this._isvBind(this.$window,"orientationchange",this._orientationChangeFunc,"$window")}}this._isvBind(this.$scrollerContent,"updatelayout",this._updateLayoutFunc,"$scrollerContent");if(this.options.debug&&this.options.traceCreateDestroy){this._logInterval("_create() end",t)}},destroy:function(){var t=null;if(this.options.debug&&this.options.traceCreateDestroy){t=this._log("destroy() start")}this._isvUnbind(this.$scrollerContent,"updatelayout","$scrollerContent");if(this.options.resizeEvents.length){this._isvUnbind(this.$window,this.options.resizeEvents,"$window")}this._isvUnbind(this.$window,"orientationchange","$window");if(this._instanceCount()===1){this._unbindPage("pagebeforeshow");if(i){this._unbindPage("touchmove")}}if(!this.options.fastDestroy){this.iscroll.destroy();this.iscroll=null;this._undoExpandScrollerToFillWrapper();this._undoModifyPullDown();this._undoModifyPullUp();this._undoAddSpacers();this._undoAddScrollerPadding();this._undoModifyWrapper();this.$wrapper.removeClass(this.options.wrapperClass);this.$scroller.removeClass(this.options.scrollerClass);this._undoCreateScroller()}this._instanceCount(this._instanceCount()-1);if(this._instanceCount()===0){this._undoAdaptPage()}e.Widget.prototype.destroy.call(this);if(this.options.debug&&this.options.traceCreateDestroy){this._logInterval("destroy() end",t)}},enable:function(){this.iscroll.enable();e.Widget.prototype.enable.call(this)},disable:function(){this.iscroll.disable();e.Widget.prototype.disable.call(this)},_setOption:function(t,n){var r;this.options[t]=n;this.iscroll.destroy();r=this._setPageVisible();this._create_iscroll_object();this._restorePageVisibility(r);e.Widget.prototype._setOption.apply(this,arguments)},scrollTo:function(e,t,n,r){this.iscroll.scrollTo(e,t,n,r)},scrollToElement:function(e,t){this.iscroll.scrollToElement(e,t)},scrollToPage:function(e,t,n){this.iscroll.scrollToPage(e,t,n)},stop:function(){this.iscroll.stop()},zoom:function(e,t,n,r){this.iscroll.zoom(e,t,n,r)},isReady:function(){return this.iscroll.isReady()},x:function(){return this.iscroll.x},y:function(){return this.iscroll.y},wrapperW:function(){return this.iscroll.wrapperW},wrapperH:function(){return this.iscroll.wrapperH},scrollerW:function(){return this.iscroll.scrollerW},scrollerH:function(){return this.iscroll.scrollerH},minScrollX:function(e){if(e!==r){this.iscroll.minScrollX=e}return this.iscroll.minScrollX},minScrollY:function(e){if(e!==r){this.iscroll.minScrollY=e}return this.iscroll.minScrollY},maxScrollX:function(e){if(e!==r){this.iscroll.maxScrollX=e}return this.iscroll.maxScrollX},maxScrollY:function(e){if(e!==r){this.iscroll.maxScrollY=e}return this.iscroll.maxScrollY},_pullDownIsPulled:function(){return this.$pullDown.length&&this.$pullDown.hasClass(this.options.pullPulledClass)},_pullUpIsPulled:function(){return this.$pullUp.length&&this.$pullUp.hasClass(this.options.pullPulledClass)},_replacePullText:function(t,n){var r;if(n){r=e("."+this.options.pullLabelClass,t);if(r){r.text(n)}}},_pullSetStateReset:function(e,t){if(e.is("."+this.options.pullLoadingClass+", ."+this.options.pullPulledClass)){var n=e.find(".iscroll-pull-icon"),r=n.clone();e.removeClass(this.options.pullPulledClass+" "+this.options.pullLoadingClass);this._replacePullText(e,t);n.replaceWith(r)}},_pullDownSetStateReset:function(e){this._pullSetStateReset(this.$pullDown,this.options.pullDownResetText);this._triggerWidget("onpulldownreset",e)},_pullUpSetStateReset:function(e){this._pullSetStateReset(this.$pullUp,this.options.pullUpResetText);this._triggerWidget("onpullupreset",e)},_pullSetStatePulled:function(e,t){e.removeClass(this.options.pullLoadingClass).addClass(this.options.pullPulledClass);this._replacePullText(e,t)},_pullDownSetStatePulled:function(e){this._pullSetStatePulled(this.$pullDown,this.options.pullDownPulledText);this._triggerWidget("onpulldownpulled",e)},_pullUpSetStatePulled:function(e){this._pullSetStatePulled(this.$pullUp,this.options.pullUpPulledText);this._triggerWidget("onpulluppulled",e)},_pullSetStateLoading:function(e,t){e.removeClass(this.options.pullPulledClass).addClass(this.options.pullLoadingClass);this._replacePullText(e,t)},_pullDownSetStateLoading:function(e){this._pullSetStateLoading(this.$pullDown,this.options.pullDownLoadingText);this._triggerWidget("onpulldownloading",e)},_pullUpSetStateLoading:function(e){this._pullSetStateLoading(this.$pullUp,this.options.pullUpLoadingText);this._triggerWidget("onpulluploading",e)},_pullOnRefresh:function(e){if(this.$pullDown.length){this._pullDownSetStateReset(e)}if(this.$pullUp.length){this._pullUpSetStateReset(e)}},_pullOnScrollMove:function(e){var t,n,r,i,s,o,u=this.y();if(this.$pullDown.length){t=this._pullDownIsPulled();r=this.options.topOffset;i=r/2;if(!t&&u>i){this._pullDownSetStatePulled(e);this.minScrollY(0)}else if(t&&u<=0){this._pullDownSetStateReset(e);this.minScrollY(-r)}}if(this.$pullUp.length){n=this._pullUpIsPulled();s=this.options.bottomOffset;o=s/2;if(!n&&u<this.maxScrollY()-s-o){this._pullUpSetStatePulled(e);this.maxScrollY(this.wrapperH()-this.scrollerH()+this.minScrollY())}else if(n&&u>=this.maxScrollY()){this._pullUpSetStateReset(e);this.maxScrollY(this.wrapperH()-this.scrollerH()+this.minScrollY()+s)}}},_pullOnScrollEnd:function(e){if(this._pullDownIsPulled(e)){this._pullDownSetStateLoading(e);this._triggerWidget("onpulldown",e)}else if(this._pullUpIsPulled(e)){this._pullUpSetStateLoading(e);this._triggerWidget("onpullup",e)}}})})(jQuery,window,document);jQuery(document).trigger("iscroll_init");jQuery(document).bind("pagecreate",function(e){"use strict";var t=jQuery(e.target).find(":jqmData(iscroll)");t.iscrollview()})