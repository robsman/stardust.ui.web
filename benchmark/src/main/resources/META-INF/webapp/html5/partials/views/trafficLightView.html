<div class="view-panel"
	ng-controller="sdTrafficLightViewController as ctrl">
	<div class="view-panel-toolbar" ng-click="ctrl.setShowTLVCriteria()"
		aid="COM-benchmark-ShowHideCriteria">
		<i ng-show="ctrl.showTLVCriteria" class="sc sc-arrow-d icon-lg"></i> <i
			ng-show="!ctrl.showTLVCriteria" class="sc sc-arrow-r icon-lg"></i> <span
			style="color: #2F6871; font-weight: bold; font-size: 11px;">{{i18n('benchmark-messages.views-trafficLightView-label')}}</span>
	</div>
	<div ng-show="ctrl.showTLVCriteria" id="benchmarkTable">
		<form name="ctrl.tlvCriteriaForm">
			<div class="msg-error"
				ng-show="ctrl.tlvCriteriaForm.$error.benchmarksNotIdentical">
				{{ctrl.errorMsg}}</div>
			<div>
				<span>{{i18n('benchmark-messages.views-trafficLightView-processes-label')}}</span>
				<select size="5"
					style="white-space: nowrap; margin: 5px; padding: 0;"
					multiple="multiple" ng-model="ctrl.selectedProcesses"
					ng-options="opt as opt.name for opt in ctrl.processes">
				</select>
				<span>{{i18n('benchmark-messages.views-trafficLightView-benchmarks-label')}}</span>
				<select size="5"
					style="white-space: nowrap; margin: 5px; padding: 0;"
					multiple="multiple" ng-model="ctrl.selectedBenchmarks"
					ng-options="opt.oid as opt.name for opt in ctrl.benchmarkDefinitions">
				</select>
			</div>
			<div>
				<span>{{i18n('benchmark-messages.views-trafficLightView-drilldown-label')}}</span>
				<select size="1"
					style="white-space: nowrap; margin: 5px; padding: 0;"
					ng-model="ctrl.selectedDrillDown"
					ng-change="ctrl.drillDownChange()">
					<option value="PROCESS_WORKITEM">Process/Work Item</option>
					<option value="BUSINESS_OBJECT">Business Object</option>
				</select>
			</div>
			<div ng-if="ctrl.showBusinessObjects">
			   <table>
			     <tr>
			       <td><span>{{i18n('benchmark-messages.views-trafficLightView-businessObject-label')}}</span>
					   <select ng-model="ctrl.selectedBusinessObject"
							ng-options="businessObject as businessObject.label for businessObject in ctrl.businessObjects"
							ng-change="ctrl.getBusinessObjectInstances()"></select>
			       </td>
			       <td>
			         <div sd-auto-complete sda-matches="ctrl.businessObjectInstancesData" sda-match-str="ctrl.matchVal"
						sda-change="ctrl.getBOInstanceMatches(ctrl.matchVal)" sda-text-property="{{ctrl.primaryKeyForBO}}"
						class="sd-participant-selector"
						sda-container-class="sd-ac-container"
						sda-item-hot-class="sd-ac-item-isActive"
						sda-selected-matches="ctrl.selectedBusinessObjectInstances"
						sda-allow-duplicates="false"
                    	sda-allow-multiple="true"></div>
			       </td>
			     </tr>
			   </table>
			</div>
			<div ng-if="ctrl.showGroupByObjects" style="margin-top: 5px;">
			    <table>
			      <tr><td>
			          <span>{{i18n('benchmark-messages.views-trafficLightView-groupBy-label')}}</span>
				       <select ng-model="ctrl.selectedRelatedBusinessObject"
						ng-options="businessObject as businessObject.label for businessObject in ctrl.relatedBusinessObjects"
						ng-change="ctrl.getRelatedBOInstances()"></select>
			     	 </td>
			     	 <td>
			     	   <div sd-auto-complete sda-matches="ctrl.relatedBusinessObjectInstancesData" sda-match-str="ctrl.relatedMatchVal"
						sda-change="ctrl.getRelatedBOInstanceMatches(ctrl.relatedMatchVal)" sda-text-property="{{ctrl.selectedRelatedBusinessObject.otherForeignKeyField}}"
						sda-container-class="sd-ac-container"
						class="sd-participant-selector"
						sda-item-hot-class="sd-ac-item-isActive"
						sda-selected-matches="ctrl.selectedRelatedBusinessObjectInstances"
						sda-allow-duplicates="false"
                    	sda-allow-multiple="true"></div>
			     	 </td>
			      </tr>
			    </table>
			</div>
			<div>
				<span>{{i18n('benchmark-messages.views-trafficLightView-date-label')}}</span>
				<select size="1"
					style="white-space: nowrap; margin: 5px; padding: 0;"
					ng-model="ctrl.selectedDateType">
					<option value="BUSINESS_DATE">Business Date</option>
					<option value="STARTTIME_DATE">Start Time Date</option>
				</select> <span>{{i18n('benchmark-messages.views-trafficLightView-offset-label')}}</span>
				<input ng-model="ctrl.dayOffset" type="number">
			</div>
		</form>
		<div>
			<input class="button" type="submit"
				value="{{i18n('benchmark-messages.views-trafficLightView-update-label')}}"
				ng-click="ctrl.showTrafficLightView()">
		</div>
	</div>
	<div ng-if="ctrl.showTLVStatastics"
		ng-include="'plugins/benchmark/html5/partials/views/tlvStatastics.html'">
	</div>

     <div ng-if="ctrl.showTLVStatasticsByBO"
		ng-include="'plugins/benchmark/html5/partials/views/tlvStatasticsByBO.html'">
	</div>
	<div class="view-panel-content" ng-if="ctrl.showProcessTable">
		<div class="view-panel-toolbar heading"
			ng-bind="i18n('admin-portal-messages.views-common-processTable-title')"></div>
		<div sd-process-table="ctrl.processDataTable"
			sd-data="ctrl.getProcesslistForTLV(params)"
			sda-preference-module="ipp-views-common"
			sda-preference-id="preference"
			sda-preference-name="ipp-views-common.processTable.selectedColumns" />
	</div>
	
	<div class="view-panel-content" ng-if="ctrl.showActivityTable">
		<div class="view-panel-toolbar heading"
			ng-bind="i18n('admin-portal-messages.views-common-activityTable-title')"></div>
		<div sd-activity-table="ctrl.activityDataTable" sda-mode="activityTable"
			sd-data="ctrl.getActivityListForTLV(params);"
			sda-preference-module="ipp-views-common"
			sda-preference-id="preference"
			sda-preference-name="ipp-views-common.activityWithPrio.selectedColumns"></div>
	</div>
</div>